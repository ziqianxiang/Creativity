Under review as a conference paper at ICLR 2020
Understanding Distributional Ambiguity
via Non-robust Chance Constraint
Anonymous authors
Paper under double-blind review
Ab stract
We propose a non-robust interpretation of the distributionally robust optimization
(DRO) problem by relating the impact of uncertainties around the distribution on
the impact of constraining the objective through tail probabilities. Our interpreta-
tion allows utility maximizers to figure out the size of the ambiguity set through
parameters that are directly linked to the chance parameters. We first show that
for general φ-divergences, a DRO problem is asymptotically equivalent to a class
of mean-deviation problems, where the ambiguity radius controls investor’s risk
preference. Based on this non-robust reformulation, we then show that when a
boundedness constraint is added to the investment strategy. The DRO problem
can be cast as a chance-constrained optimization (CCO) problem without distri-
butional uncertainties. Without the boundedness constraint, the CCO problem
is shown to perform uniformly better than the DRO problem, irrespective of the
radius of the ambiguity set, the choice of the divergence measure, or the tail heav-
iness of the center distribution. Besides the widely-used Kullback-Leibler (KL)
divergence which requires the distribution of the objective function to be expo-
nentially bounded, our results apply to divergence measures that accommodate
well heavy tail distribution such as the student t-distribution and the lognormal
distribution. Comprehensive testings on synthetic data and real data are provided.
1	Introduction
Optimization models with an expectation as the objective function are always used when studying
decision making problems. These problems require the knowledge of the “true” distribution, which
is uncertain, so its estimation is required. Many studies have been focused on different estimation
methods, see for example Merton (1980), Bai et al. (2007), El Karoui et al. (2008), and Qiu et al.
(2015). However, it is often not accurate since the number of observations is inadequate. For
example, as stated in Chen & Yuan (2016), around 3, 000 months of historical data are needed to
give accurate approximations for a portfolio of 25 assets. In reality, it is impossible to have such long
time series data sets. An inaccurate estimation of the distribution can cause erroneous judgments
for a practitioner based on corresponding solutions. It is necessary to seek an approach that can
incorporate uncertainty under a scarcity of data.
Formulating a distributionally robust optimization (DRO) model is recognized as a solution to deal
with the issue. In a DRO model, we add an extra layer of inner optimization over an ambiguity set
which contains distribution as uncertainty. Generally, there are 3 ways to describe the ambiguity set.
The first way is the geometric approach, in which the ambiguity set is described as desired geometric
shapes such as box, ellipsoid and polyhedral, etc. (e.g., Kim et al. (2014), Zhu et al. (2009), and Zhu
& Fukushima (2009)). The second way is the moment-based approach, and was studied in Delage
& Ye (2010), Scarf (1957), Chen et al. (2011), and Zymler et al. (2013) for instance. The ambiguity
set is usually defined so that all distribution in it have the same n-th moments. The last way is the
statistical distance approach so that the ambiguity set can be thought as a ball with ambiguity radius
ρ such that it contains all the distribution of distance/divergence measures from a center distribution
less than ρ.
We adopt the statistical distance approach to define the ambiguity set. This is because under the
geometric approach and moment-based approach, it is not assured that the “true” distribution lies in
the ambiguity set. As a result, optimal solutions become meaningless although it is easier than using
1
Under review as a conference paper at ICLR 2020
the statistical distance approach. Only a small portion of the DRO problems under the statistical
distance approach are known to be solved analytically. For example, Hu & Hong (2013) solves
the DRO problem if the ambiguity set is constructed using KL divergence. Instead of seeking an
analytical solution, we can apply an expansion approach (see e.g., Lam (2016) and Gotoh et al.
(2018)) to solve the DRO problem. The advantage of using the expansion approach is that we can
consider solving DRO under general divergence measures.
In this paper, we would like to understand the ambiguity set in the financial context and further find
a non-robust interpretation of the ambiguity set, which is characterized by the radius parameter ρ.
This is because the value has a great impact on the optimal solution. Small values of ρ exclude
the true distribution being examined, while large values of ρ make the DRO problem conservative.
Both are not very useful in practice. Pardo (2005) gives a statistical meaning of ρ asymptotically
and Ben-Tal et al. (2013) applies it to interpret the ambiguity set. The interpretation of the ambi-
guity radius is based on the assumption that the true distribution is within the same parameterized
distribution family as the center distribution. Such assumption limits the universal understanding of
the ambiguity radius. In this paper, we relate the DRO problem to a CCO problem. We find that a
DRO problem can be reformulated as a class of optimization problems with mean-deviation as the
objective function after using the expansion method to remove randomness. We then reformulate a
chance-constrained optimization CCO problem and derive equivalence between the DRO problem
and the CCO problem. This equivalence opens a door for financial practitioners to interpret the
radius parameter through parameters that are directly linked to investment performance.
The rest of this paper is organized as following. In Section 2, we provide background informa-
tion and a motivation on the optimization problems being considered, including notations and φ-
divergences in defining the ambiguity set. In Section 3, we reformulate the DRO problem and CCO
problem, respectively, and solve the corresponding optimal decisions and optimal values. Section
4 gives numerical experiments, while Section 5 concludes our findings. All detailed proofs are
postponed to the Appendix.
2	Problem setup
In this section, we introduce the notations used in this paper and give a brief introduction to the
φ-divergence for defining the ambiguity set. Furthermore, we present the motivation to explain why
we focus on the ambiguity radius in the DRO problem.
Notations. Let r ∈ Rn , an n-dimensional real-valued random vector, be the vector of asset returns
and suppose that the joint probability distribution of r is P . Let P0 be the nominal probability
distribution of r. Let x ∈ Rn be the asset allocation strategy and e ∈ Rn be a vector with all entries
equal to 1, respectively. We assume that x lies in a convex set X and P lies in an ambiguity set U.
φ-divergence. φ-divergence is a commonly used statistical distance to describe the ambiguity set
U. It quantifies how one probability distribution diverges from another. It’s defined by a convex
function φ(t) which satisfies φ(1) = 0, 0φ (0) := 0, and φ (0) := a limt→∞ φtt) when a > 0.
Given the function φ(t), the φ-divergence D(Q||P) between distribution Q and distribution P is:
D(Q||P):= Zo φ (dQ)p(dt) = EP φ (dQ) := EP [φ(L)],
The quantity L is called the Radon Nikodym derivative (or likelihood ratio) such that L ≥ 0 almost
surely and EP [L] = 1. Associated with the function φ(t) is its conjugate function φ*(s), defined as
φ*(s) := sup{st — φ(t)}.	(1)
t≥0
Table 1 lists the two divergences used in this paper. The KL divergence is commonly used because
of the appealing properties its conjugate function has. In order to use the KL divergence, the dis-
tribution of the objective function needs to be exponentially bounded, which excludes important
heavy tail distribution used ubiquitously for financial asset returns, especially the lognormal distri-
bution and the student t-distribution. The Cressie-Read divergence, also called the α-divergence in
Glasserman & Xu (2014), overcomes this limitation and can well accommodate heavy tail distri-
bution. However, our interpretation of the ambiguity radius ρ as a chance constraint applies to all
2
Under review as a conference paper at ICLR 2020
Table 1: The two φ-divergences used in this paper. The KL divergence applies to light-tail distribu-
tion, while the Cressie-Read divergence is compatible with heavy tail distribution.
Divergence	φ(t),t ≥ 0	φ*(s)	
Kullback-Leibler Cressie-Read	t log(t) - t + 1 ⅞⅜tθ ,θ = 0,1	es - 1 θ (1-s(1-θ))θ-1	1.1 θ	- θ，s < 口
the φ-divergences, including Burg entropy, J -divergence, χ2-distance, modified χ2-distance, and
Hellinger distance.
Motivation. The goal is to maximize the expectation of investors’ utility function f(x, r) over a set
of admissible allocation strategies X, namely, maxχ∈χ Er〜P [f (x, r)]. Utility function is ubiquitous
in economics and it measures one’s preference for alternatives. In general, it is either in the form
-axTr
of exponential utility function f (x, r) =	&----(a = 0) or in the form of power utility function
(a.k.a. CRRA utility function) f(x, r) = (X ：1η-1 When η = 1 & η > 0 and f(x, r) = ln(xTr)
when η = 1 (Pratt (1978)). Whatever the concrete utility function is, the stochastic optimization
problem itself depends strongly on assumptions and properties of the asset return r, the true distri-
bution of Which is usually unknoWn. To address the distribution uncertainty, a common approach is
to formulate a robust counterpart of the original problem, called as a distributionally robust optimiza-
tion problem. A DRO formulation addresses the uncertainty by constructing an ambiguity set of dis-
tributions centered at the nominal distribution P0 and then optimizing the Worst-case utility among
all distributions Within the ambiguity set. In this paper, We focus on an ambiguity set U defined by
the φ-divergence and controlled by a radius parameter ρ > 0, i.e., U := {P : D(P ||P0) ≤ ρ}.
Thus, the distributionally robust counterpart of the original stochastic optimization problem is:
max min Er〜P[f (x, r)].
(2)
The choice of ambiguity radius ρ is critical. One cannot set it too large since the maximal utility
decreases in ρ. HoWever, if it is too small, one loses the robust protection. There is a trade-off in
choosing its magnitude. This situation requires an alternative interpretation of the ambiguity radius
ρ. Pardo (2005) proves that, assuming that the true distribution P and the nominal distribution P0
belong to the same parameterized distribution family With parameter dimension d, then the nor-
malized estimated φ-divergence 力㈱、)D(P||Po) asymptotically follows a χd-distribution. It thus
relates the ambiguity radius ρ to a confidence level at Which the true distribution P falls Within this
ambiguity set. However, in financial practice with real data, the assumption that the true distribu-
tion is in the same parameterized family with the center distribution often fails to hold. A wrong
guess of the nominal distribution might lead to a meaningless confidence level interpretation of the
ambiguity radius ρ. Focusing on the impact of the ambiguity radius ρ on the maximal utility, we
realize that, through a CCO problem, the ambiguity radius ρ can be explained by the parameters of
a chance-constrained problem, using only information of the nominal distribution P0 .
The CCO problem considered in this paper is:
max Er〜Po [f(x, r)]	s.t.	Po(f(x, r) ≤-δ) ≤ e.	⑶
x∈X
It shares the same objective function as that of problem (2). The expectation is taken under the nom-
inal distribution P0, not subject to distributional robustness. The new component is the probability
constraint with the parameters δ and characterizing downside risk, which incorporates the tail of
r into consideration. Similar CCO formulations appear often, from the basic Kelly problem to the
newsvendor problem (see for example, Busseti et al. (2016) and Ozler et al. (2009)). Our work
aims to interpret U incorporating the tail information of r. To be specific, we try to find the relation
between ρ in (2) and (, δ) in (3). In the coming section, we first describe the expansion approach in
solving DRO problem (2). For CCO problem (3) with general chance constraints, there is no con-
sensus on explicit solutions. So as a special case, we focus on the utility function f(x, r) := xTr
in the CCO problem. By transforming constraints in (3) to VaR, we obtain analytically the relation
between (2) and (3) under an unbounded feasibility set of allocation strategies. For bounded feasi-
bility set, we look into the equivalence on (2) and (3) through numerical experiments. Although our
methodology is investigated in the financial context, it can also be applied to other contexts.
3
Under review as a conference paper at ICLR 2020
3	INTERPRET ρ AS A CHANCE CONSTRAINT
In this section, we discuss how to reformulate (2) and (3) so that we can compare the optimal values
of the two problems.
3.1 Reformulation of (2)
The Lagrangian dual to the inner minimization problem in (2) is:
maχ1 S- -1max {Er~Po [-η2(f (χ, r) + ηI)L - φ(L)]} - ηι —-[
η1∈R,η2≥0	η2 L	η2
=	maχ.n【- -1 Er~Po[φ*Jη2f (X, r) + ηI))] - ηι - -].	⑷
η1∈R,η2≥0	η2	η2
The last equality is from the definition of conjugate function φ*(s) in Eq. (1). Difficulty in solving
the dual problem lies in the term Er~p0 [φ*(-η2(xτr + ηι))]. For general φ-divergence, φ*(s) may
not have explicitly formula (see Ben-Tal et al. (2013)). We hereby follow the idea in Gotoh et al.
(2018) to express (4) in terms of Regular Measure of Deviation. The results are summarized in
Theorem 3.1. For notation simplicity, We would shorten the term Er~p0 [∙] to E[∙] without further
explanation.
Theorem 3.1. Let φ(t) be a closed proper ConvexfUnction and the conjugatefunction φ*(s) defined
in Eq. (1), respectively. Suppose that under mild conditions, the strong duality holds. Defining
Dη ,Φ,Po (f(x, r)∣E[f(x, r)])：= min [ηι + 1- E [Φ* (η2(E[f (x, r)] - f(x, r) - ηι))]∖ .
η1	η2
Then, (2) is equivalent to:
max [E[f(x, r)] - min [ — + Dη2,φ,Po(f (x, r)|E[f(x, r)])]l .	⑸
x∈X	η2 ≥0 η2
Through Theorem 3.1, we can eliminate the distribution uncertainty in (2) and reformulate the
DRO problem to a deterministic optimization problem as in (5). The only unknown term
Dr∣2,ΦPo (f (x, r)∣E[f (x, r)]) is indeed a function of φ*. Therefore, we apply the expansion method
to the quantity Dη2,φ,P0 (f (x, r)|E[f (x, r)]) and expand it as a series of terms, the coefficients of
which can be computed under the nominal distribution P0. In such a way, we can reformulate (2) as
a single-layer maximization problem.
Lemma 3.2. Suppose that n is an even number, φ(t) ∈ Cn+1 is a convex function which satisfies
φ(1) = φ(1) (1) = 0 and φ(2) (1) > 0. Assume E[Xk] < ∞ for k ≤ n and X defined by X ：=
f(x, r) - E[f (x, r)], then
n-1
Dη2,Φ,P0 (f (x, r)∣E[f(x, r)]) = X bkE [(X + 喈产1] ηk + "^-1),	(6)
k=1
where bk
(-1)k+1z(k)(0)
(k+I)!
,and n； is the optimal solution to minm
Pkn=-11bkE (X + η1)k+1 η2k.
Specifically, z(∙) is a function satisfying z(0) = 1, Z(I) (∙) = @(2)")), and z(k)(∙) can be obtained
recursively for k ≥ 2.
Note that most of the φ-divergences (KL divergence, Cressie-Read divergence, Burg entropy, J-
divergence, χ2-distance, modified χ2-distance, and Hellinger distance) satisfy the smoothness con-
ditions. Taking KL divergence and Cressie-Read divergence as example, forn = 4, we can explicitly
solve the terms in Eq. (6), as shown in the following corollary.
Corollary 3.3. Consider the case n = 4. Define X ：= f(x, r) - E[f (x, r)]. Then the 4th order
expansion ofDη2,φ,P0(f(x, r)|E[f (x, r]) is:
3
Dη2,Φ,P0 (f (x, r)∣E[f (x, r]) = X bkE [(X + n；)k+1] n2 + o(n3),	⑺
k=1
4
Under review as a conference paper at ICLR 2020
with 宿 being the real root to thefollowing cubic equation
3
X(k + 1)bkηk ∙ ηk + 12b3η3E[X2] ∙ m + (4b3*E[X3] + 3b2η∣E [X2]) = 0.	(8)
k=1
For KL divergence, the coefficients are b1 = 1/2, b2 = -1/6, b3 = 1/24; for Cressie-Read
divergence with θ > 2, the coefficients are b1 = 1/2, b2 = (θ - 2)/6, b3 = (θ - 2)(2θ - 3)/24.
Gotoh et al. gives a similar expansion ofDη2,φ,P0(f(x, r)|E[f (x, r)]) (see Proposition 3.5 of Gotoh
et al. (2018). The main difference between our expansion in Eq. (7) and the expansion given by
Gotoh et al. lies in the calculation of η↑. In Eq. (7), η1 is directly solved through the polynomial
equation, while in Gotoh et al. (2018),谓 is approximated as a function of η2. In the sequel, We
consider the 2nd order expansion of Dη2,φ,p>0 (f (x, r)∣E[f (x, r)]), which is 3%¾^). Substituting
this back to (5), we achieve the 2nd order reformulation of (2) in Theorem 3.4.
Theorem 3.4. Suppose that φ(t) is convex, twice continuously differentiable, and that φ(1) =
φ(1)(1) = 0 and φ(2)(1) > 0. Define X := f(x, r) - E[f (x, r)]. (2) is asymptotically equivalent
to a mean-deviation problem:
mχ∈xx (Ef(X，r)]- S 2ρEXr).	⑼
Theorem 3.4 tells that the ambiguity radius P controls the investor,s risk preference. Notice that,
in the 2nd order reformulation of (2), the optimal Lagrangian multiplier η2 = y 2ρ%χ(1), which
increases simultaneously with P. This suggests, when P is small, the optimal Lagrangian multiplier
η2 is also small and the expansion in equation (6) is accurate. Later theoretical analysis over the DRO
problem would be based on the 2nd order reformulation in Eq. (9). As stated before, we consider
f (x, r) = xTr in the sequel such that E[f (x, r)] is replaced by XTμ and E[X2] is replaced by
xTΣx in Eq. (9), where we denote E[r] = μ and Cov(r) = Σ.
3.2	Reformulation of (3)
Note that when f(x, r) = xTr, the chance constraint in (3) is of the same form as the definition
of VaR, which focuses on the probability of losses. This motivates us to reorganize the tail chance
constraint in (3) with VaR. The VaR is defined as the minimal level γ such that the probability that
the portfolio loss -xTr exceeds γ is below , i.e., V(x) := inf {γ ∈ R : P0{-xTr ≥ γ} ≤ }.
With the definition of V (x), we have the equivalent form of chance constraint P0{-xTr ≥ δ} ≤
as V(x) ≤ δ. Hence, (3) can be reformulated as
m吩 XTμ	s.t.	Ve(X) ≤ δ.
If P0 is a normal distribution, then Ve(X) = K(E)√xτΣx 一 xτμ, where K(E) = —Φ-1(e). For gen-
eral elliptical distribution, Lesniewski et al. (2016) gives an asymptotic expansion of Ve(x), which
takes the form K(E)√xtΣx 一 xTμ asymptotically when E → 0. For example, if P0 is student t dis-
d	d— 1 V +1	V
tribution with degree of freedom parameter V, then K(E) = DE-V, where D = ( cdπ 2 ν+dɪ) )
∖ νr(	) J
Γ( ν + d) v d
and Cd = ；(2)v 2 ∏-2. For distributions other than elliptical distributions, Ghaoui et al. (2003)
suggests an approximation of k(e): K(E) = J 1-e. This suggests that (3) can be reformulated as a
second-order cone optimization problem:
max xtμ	s.t.	k(e)λ/xtΣx 一 XTμ ≤ δ.
(10)
3.3	Solutions
It has been shown that (2) and (3) can be reformulated to a deterministic mean-deviation problem in
(9) and a linear optimization with a second-order cone constraint in (10), respectively. In this section,
5
Under review as a conference paper at ICLR 2020
we look into the optimal solution and the optimal value to optimizations (9) and (10) to interpret the
impact of the ambiguity radius ρ. We would denote the optimal solution and the optimal value to
optimization (9) by x* and v*, respectively. Correspondingly, the optimal solution and the optimal
value to optimization (10) are denoted by X* and v*. We begin with the unbounded feasibility
set X := {x ∈ Rn | xTe = 1}. By examining the convexity of the function a√xTΣx 一 XTμ, We
know that problem (9) is a convex optimization and problem (10) is a convex optimization only when
κ() > 0. Recall that in a convex optimization, any local optimum is certainly a global optimum.
This motivates us to study the optimal solution to problem (9), x*, and the optimal solution to
problem (10), X*, through KKT conditions. The results for (x*, v*) and (X*, V*) are summarized
in Theorem 3.5 and Theorem 3.6, respectively.
Theorem 3.5.	Suppose φ⑵(1) > 0. Define A := eTΣ-1e, B := μτΣ-1e, and C := μτΣ-1μ.
Then for optimization (9) with the feasibility set X := X ∈ Rn | XTe = 1 , we have:
•	If P > φ(2)(1)(C — BA2)/2, then the optimal solution and optimal valuefor problem (9) are
X* = TU" -*λTe)-1 , v* = λ* = B/A — ,B2- A (C - 2ρ∕φ⑵⑴)/A.
μ1 Σ 1e — λ*e1 Σ 1e	Y
•	If ρ ≤ φ(2)(1)(C — B2 )/2 ,then no local optimal solution for problem (9) and the optimal
value v* = +∞.
Notice that, for (2) with an unbounded feasibility set, the optimal value is +∞ when there is no
distributional uncertainty (equivalently, ρ = 0). Thus, Theorem 3.5 establishes a threshold for the
ambiguity radius ρ, beyond which the distributional uncertainty is indeed effective.
Theorem 3.6.	Given A, B, and C defined in Theorem 3.5. Suppose κ() > 0, and then for opti-
mization (10) with the feasibility set X := X ∈ Rn | XTe = 1 , the following conclusions hold:
•	If (, δ) satisfies C — B2/A < (κ())2 < δ2A + 2δB + C and B + δA > 0, then the
optimal solution and optimal value are:
X*
∑	[(1 + λ)μ — θe]
,
eT ∑-1[(1 + λ)μ — θe]
~ ~
v* = λδ + θ,
where λ = (AC — B2”(Aκ(e)2 — AC + B2) + (κ(e)(B + Aδ)√AC — B2”((Aκ(e)2 —
AC + B2) √Aδ2 + 2Bδ + C — κ(e)2) and θ= ((C + δB)(λ+1) — XK(E)2)/(B + δA).
Furthermore, when the optimal value v* for problem (9) is finite, v* ≥ v*.
•	IfB > 0 and if (E, δ) satisfies C — B2/A < (κ(E))2 < δ2A + 2δB + C and B + δA < 0,
then thefeasibility setfor problem (10) is 0.
•	If (E, δ) satisfies (κ(E))2 ≤ C — B2/A, then there exists no local optimal solution for
problem (10) and the optimal value vX* = +∞.
In Theorem 3.6, we first provide the sufficient and necessary conditions of (E, δ) for the optimization
problem (10) to have a finite optimal value. We further compare the finite optimal values to prob-
lem (10) and to problem (9), vX* and v* , and find that the CCO reformulation performs uniformly
better than the DRO reformulation. In addition, we identify one sufficient condition under which
optimization (10) is infeasible. We also identify one sufficient condition for the chance constraint to
be redundant in optimization (10), and the optimal value tends to be positive infinity.
4	Experiments
In Section 3, we proved that the CCO reformulation performs better than the DRO reformulation
when the optimal values are both finite for an unbounded strategy set. For a bounded strategy
set, SOCP problem with boundedness is generally explicitly unsolvable. So we resort to numerical
analysis. In Section 4.1, we numerically test the reformulation accuracy of optimization (9) to (2). In
Section 4.2, we conduct experiments to understand the ambiguity radius ρ via the chance constraints
and find that the tail heaviness indeed affects the interpretation of ρ. In Section 4.3, we test the
interpretation of the ambiguity radius based on empirical data.
6
Under review as a conference paper at ICLR 2020
4.1	Reformulation accuracy of (2)
In this section, we numerically test the reformulation accuracies of the 2nd order and 4th order
reformulations with respect to (2). The φ-divergence we take includes both KL divergence and
Cressie-Read divergence. It is known that under KL divergence, (2) can be exactly solved. Under
Cressie-Read divergence, we take the optimal value solved by the Robust Monte Carlo method
introduced in Glasserman & Xu (2014) as the benchmark to compare the results.
Table 2 records under KL divergence, the relative errors (in the 3rd & 4th rows) w.r.t. the exact
optimal value (the 2nd row). It is demonstrated that the higher order improvement is particularly
notable when data exhibits a heavier tail. In the case of Cressie-Read divergence, which we do not
record in the table due to the page limit, we observe a 50 times improvement: when ρ is set to
0.78, relative error for the 4th order reformulation is 1.53%, while it is 56.54% for the 2nd order
reformulation given that the optimal value is -0.2787. Here, we assume that the ambiguity set under
the KL divergence centers at a six-dimensional multivariate exponential distribution with mean=0.2,
std=0.2, skewness= 2, and kurtosis= 6. We set the dimensions to be i.i.d to see a clear impact from
the heavy tail. And the center distribution P0 under Cressie-Read divergence is multivariate t. We
see that the larger the size of the ambiguity set, i.e., larger ρ, the better the improvement of the 4th
order reformulation. In fact, the error reduction is about 10 folds in this example. However, using
the 2nd order equivalent formulation is good enough to study relations between (2) and (3) when ρ
is small.
Table 2: Relative errors of the 4th order reformulation and 2nd order reformulation w.r.t. the optimal
value of (2). Ambiguity sets are defined by KL divergence centered at 6-d exponential distribution.
ρ	0.01	0.02	0.03	0.04	0.05	0.06	0.07	0.08	0.09
vopt1	0.1887	0.1841	0.1807	-^0.1778-	0.1753	0.1730	0.1710	0.1691	0.1673
4th order	0.0002%	0.0038%	0.0128 %	0.0274%	0.0479%	0.0748%	0.1082%	0.1483%	0.1951%
2nd order	0.1172%	0.2397%	0.3659%	0.4951%	0.6270%	0.7613%	0.8979%	1.037%	1.778%
4.2	INTERPRETATION OF ρ UNDER DISTRIBUTION WITH DIFFERENT TAIL HEAVINESSES
This experiment shows that the tail heaviness of the nominal distribution P0 indeed affects the in-
terpretation of the ambiguity radius ρ. We focus on three distribution of 5 assets: multivariate nor-
mal/lognormal distribution and student t3 -distribution. The set of allocation strategies is bounded
below by -1, and the ambiguity radius ρ is fixed at 0.27. We say that the ambiguity radius ρ can
be explained by a chance constraint with parameters (, δ) if the optimal value of problem (9) is
equal to that of problem (10) under the same distribution P0. We plot the results of equivalent (, δ)
in Figure 1. It shows that, first, the ambiguity radius ρ can be explained by a set of pairs (, δ) in
terms of the impact on the optimal value. Second, tail heaviness affects the interpretation of ρ and
distribution with heavier tail result in a larger loss threshold for a given loss probability .
Figure 1: Given ρ = 0.27, tail heaviness affects the equivalent loss threshold δ.
7
Under review as a conference paper at ICLR 2020
4.3	Empirical studies
To see more clearly the financial interpretation of the ambiguity radius ρ, we undergo experiments
based on empirical data. We extract past 40 years’ daily simple returns of four major asset classes:
Equity indexes (DAX, FTSE, HSI, NASDAQ, NIKKEI250, SP500) , US Treasuries (2year, 10year,
30year), Currencies (AUD/USD, CHF/USD, EUR/USD, GBP/USD, JPY/USD), and Commodities
(Crude oil, Silver, Gold). For the DRO problem, we use the Cressie-Read divergence instead of KL
divergence since all data exhibits quite heavy tail. For the CCO problem, we choose the negative
daily return threshold -δ to be the 1%, 3% and 5% empirical quantile of the daily simply return
series for each asset class so that they can differ across assets. We choose the chance level ranging
from 1% to 20%. The results are given in the section A.1 such that Table 4, Table 5, Table 6
and Table 7 corresponds to asset class equity indexes, US Treasuries, currencies and commodities
accordingly.
In order to study the relation between ρ in (2) as well as δ and in (3) on the four assets classes
at the same time, we report the equivalent ambiguity radius ρ of the DRO problem, together with
the corresponding optimal portfolio return (annualized), at a given pair of the CCO parameters (,
δ) for the four asset classes simultaneously in Table 3. In the table, we extract the results when δ
corresponds to 3% and to be 2% and 5%, which mincing (rounded) event frequencies at quarterly
(4 out of 252) and monthly (12 out of 252) so that investors can relate to the degree of event
rareness. The portfolio weights are limited to be bounded below by -1. Both multivariate t- and
normal distribution are tested as the center P0 of the ambiguity set U when fitting data. Also, we
test the 4th order and 2nd order reformations of the DRO problem.
We read from Table 3 that, by relating the size of ambiguity set ρ in the DRO problem to the CCO
chance parameters, it then becomes tangible, without which even the appropriate order is hard to
guess. In our tests, its magnitude can range from 10-3 to 10-14 depending on asset classes and
the investor’s tolerance level. What’s more, the heavy tail nature of financial data demands the use
of divergence measures such as the Cressie-Read divergence, which allows heavy tail distributions
if one takes the robust approach for portfolio optimization. Ambiguity sets constructed by the KL
divergence, however, require the objective function to be exponentially bounded, which exclude
important heavy tail distribution used ubiquitously for financial asset returns, e.g., the student t-
distribution. Among the 16 tests in Table 3, the larger returns in bold show 12 favor fitting data by
assuming that P0 is multivariate t-distributed.
Table 3: Equivalent ambiguity radius ρ and optimal annualized return R at a given pair of (, δ).								
(ρt, Pn ∖ Rt,Rn	Equity: -δ = -3.35%		Bond: -δ = -6.58%		FX: -δ = -1.40%		Commodity: -δ = -4.4%	
	4th order	2nd order	4th order	2nd order	4th order	2nd order	4th order	2nd order
= 2%	3.5e-4, 1.2e-4 30.7%, 15.3%	6.1e-4, 1.2e-4 30.7%, 15.3%	2e-6, 2.8e-14 -1.1%, -2.6%	9.5e-6,2.8e-14 -1.1%,-2.6%	2.6e-4, 6.1e-5 2.3%, 3.6%	3.1e-4, 6.1e-5 2.3%, 3.6%	9.6e-5, 3.7e-9 17.3%, 4.6%	1.5e-4, 3.7e-9 17.3%, 4.6%
= 5%	3.4e-4, 1.2e-4 39.2%, 19.8%	6.1e-4, 1.2e-4 39.2%, 19.8%	2e-6, 2.8e-14 0.7%, -2.6%	4.8e-6,2.8e-14 0.7%,-2.6%	1.5e-4, 3.1e-5 4.4%, 5.0%	3.1e-4, 3.1e-5 4.4%, 5.0%	6.5e-5, 1.9e-9 22.7%, 4.6%	7.6e-4, 1.9e-9 22.6%, 4.6%
5	Conclusions
We delved into the ambiguity radius for DRO problems with a distribution ambiguity set regulated
by φ-divergence. We showed that for general φ-divergences, a DRO portfolio optimization problem
is asymptotically equivalent to a mean-deviation problem, where the ambiguity radius controls an
investor’s risk preference parameter. Theoretical analysis over the mean-deviation problem sets
a threshold for the ambiguity radius, across which the optimal value suffers from a drastic phase
transition. It is only beyond that radius threshold can the distributional uncertainty take effect.
We also showed both numerically and theoretically that, when the investment strategy is bounded,
the ambiguity radius can be cast as a chance constraint in a deterministic optimization with the
same objective. Otherwise, within the set of unbounded investment strategies, a chance-constrained
deterministic optimization consistently performs better than the DRO problem.
8
Under review as a conference paper at ICLR 2020
References
ZD Bai, BQ Miao, GM Pan, et al. On asymptotics of eigenvectors of large sample covariance matrix.
TheAnnals OfProbability, 35(4):1532-1572, 2007.
Aharon Ben-Tal and Marc Teboulle. An old-new concept of convex risk measures: The optimized
certainty equivalent. Mathematical Finance, 17(3):449-476, 2007.
Aharon Ben-Tal, Dick Den Hertog, Anja De Waegenaere, Bertrand Melenberg, and Gijs Rennen.
Robust solutions of optimization problems affected by uncertain probabilities. Management Sci-
ence, 59(2):341-357, 2013.
Enzo Busseti, Ernest K Ryu, and Stephen Boyd. Risk-constrained kelly gambling. The Journal of
Investing, 25(3):118-134, 2016.
Jiaqin Chen and Ming Yuan. Efficient portfolio selection in a large market. Journal of Financial
Econometrics, 14(3):496-524, 2016.
Li Chen, Simai He, and Shuzhong Zhang. Tight bounds for some risk measures, with applications
to robust portfolio selection. Operations Research, 59(4):847-865, 2011.
Erick Delage and Yinyu Ye. Distributionally robust optimization under moment uncertainty with
application to data-driven problems. Operations research, 58(3):595-612, 2010.
Noureddine El Karoui et al. Spectrum estimation for large dimensional covariance matrices using
random matrix theory. The Annals of Statistics, 36(6):2757-2790, 2008.
Laurent El Ghaoui, Maksim Oks, and Francois Oustry. Worst-case value-at-risk and robust portfolio
optimization: A conic programming approach. Operations research, 51(4):543-556, 2003.
Paul Glasserman and Xingbo Xu. Robust risk measurement and model risk. Quantitative Finance,
14(1):29-58, 2014.
Jun-ya Gotoh, Michael Jong Kim, and Andrew EB Lim. Robust empirical optimization is almost
the same as mean-variance optimization. Operations Research Letters, 46(4):448-452, 2018.
Zhaolin Hu and L Jeff Hong. Kullback-leibler divergence constrained distributionally robust opti-
mization. Available at Optimization Online, 2013.
Zhaolin Hu, L Jeff Hong, and Anthony Man-Cho So. Ambiguous probabilistic programs. Available
at Optimization Online, 2013.
Woo Chang Kim, Jang Ho Kim, and Frank J Fabozzi. Deciphering robust portfolios. Journal of
Banking & Finance, 45:1-8, 2014.
Henry Lam. Robust sensitivity analysis for stochastic systems. Mathematics of Operations Re-
search, 41(4):1248-1275, 2016.
Andrew Lesniewski, Heng Sun, and Qi Wu. Asymptotics of portfolio tail risk metrics for elliptically
distributed asset returns. Available at SSRN 2748970, 2016.
Robert C Merton. On estimating the expected return on the market: An exploratory investigation.
Journal of financial economics, 8(4):323-361, 1980.
AysUn Ozler, BanS Tan, and Fikn Karaesmen. Multi-product newsvendor problem With value-at-risk
considerations. International Journal of Production Economics, 117(2):244-255, 2009.
Leandro Pardo. Statistical Inference Based on Divergence Measures. CRC Press, 2005.
John W Pratt. Risk aversion in the small and in the large. In Uncertainty in Economics, pp. 59-79.
Elsevier, 1978.
Huitong Qiu, Fang Han, Han Liu, and Brian Caffo. Robust portfolio optimization. In C. Cortes,
N. D. Lawrence, D. D. Lee, M. Sugiyama, and R. Garnett (eds.), Advances in Neural Information
Processing Systems 28, pp. 46-54. Curran Associates, Inc., 2015. URL http://papers.
nips.cc/paper/5714-robust-portfolio-optimization.pdf.
9
Under review as a conference paper at ICLR 2020
R Tyrrell Rockafellar and Stan Uryasev. The fundamental risk quadrangle in risk management,
optimization and statistical estimation. Surveys in Operations Research and Management Science,
18(1-2):33-53, 2013.
R Tyrrell Rockafellar and Roger J-B Wets. Variational analysis, volume 317. Springer Science &
Business Media, 2009.
Herbert E Scarf. A min-max solution of an inventory problem. Technical report, RAND CORP
SANTA MONICA CALIF, 1957.
Shushang Zhu and Masao Fukushima. Worst-case conditional value-at-risk with application to ro-
bust portfolio management. Operations research, 57(5):1155-1168, 2009.
Shushang Zhu, Duan Li, and Shouyang Wang. Robust portfolio selection under downside risk
measures. Quantitative Finance, 9(7):869-885, 2009.
Steve Zymler, Daniel Kuhn, and Berc Rustem. Distributionally robust joint chance constraints with
second-order moment information. Mathematical Programming, 137(1-2):167-198, 2013.
10
Under review as a conference paper at ICLR 2020
A Appendix
A. 1 Numerical Results
In this section, we give numerical results on ρ and annualized return R under different δ and using
4th and 2nd order of formulation of the DRO problem for the four major asset classes. Two types of
distribution, multivariate distribution t and multivariate normal distribution are considered.
Table 4: (Equity Indexes) Equivalent ambiguity radius ρ and optimal annualized return R at a given
pair of (, δ). ’—’ means that there is no equivalent ρ for the given pair of (, δ).
(Pt, Pn ∖ Rt, Rn	Equity: -δ	= -2.68%	Equity: -δ	= -3.35%	Equity: -δ = -4.64%	
	4th order	2nd order	4th order	2nd order	4th order	2nd order
=1%	3.5e-04 ,2.4e-04	1.2e-03 ,2.4e-04	3.5e-04,1.2e-04	1.2e-03 ,1.2e-04	3.5e-04 ,1.2e-04	6.1e-04,1.2e-04
	18.8% ,9.76%	18.8% ,9.76%	25.2% ,13.2%	25.2% ,13.2%	35% ,19.3%	35% ,19.3%
=2%	3.5e-04 ,1.2e-04	1.2e-03 ,1.2e-04	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04 3.0e-04,6.1e-05		6.1e-04,6.1e-05
	24.4% ,11.7%	24.4% ,11.7%	30.7% ,15.3%	30.7% ,15.3%	42% ,22.1%	42% ,22.1%
=3%	3.5e-04 ,1.2e-04	1.2e-03 ,1.2e-04	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04 2.3e-04,6.1e-05		3.1e-04,6.1e-05
	27.5% ,13.1%	27.5% ,13.1%	34.2% ,17%	34.2% ,17%	46.9% ,24.4%	46.9% ,24.4%
=4%	3.5e-04 ,1.2e-04	6.1e-04,1.2e-04	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04	1.9e-04,—	3.1e-04,6.1e-05
	29.8% ,14.3%	29.8% ,14.3%	37% ,18.5%	37% ,18.5%	50.6% ,26.4%	50.6% ,26.4%
=5%	3.5e-04 ,1.2e-04	6.1e-04,1.2e-04	3.4e-04 ,1.2e-04	6.1e-04 ,1.2e-04	1.6e-04,—	3.1e-04,3.1e-05
	31.7% ,15.4%	31.7% ,15.4%	39.2% ,19.8%	39.2% ,19.8%	53.7% ,28.3%	53.7% ,28.3%
=6%	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04 3.1e-04,6.1e-05		6.1e-04,6.1e-05	1.3e-04,—	1.5e-04,3.1e-05
	33.3% ,16.5%	33.3% ,16.5%	41.2% ,21.1%	41.2% ,21.1%	56.4% ,30.1%	56.4% ,30.1%
=7%	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04 2.9e-04,6.1e-05		3.1e-04,6.1e-05	1.1e-04,—	1.5e-04,3.1e-05
	34.7% ,17.5%	34.7% ,17.5%	43% ,22.4%	43% ,22.4%	58.7% ,31.8%	58.7% ,31.8%
=8%	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04 2.6e-04,6.1e-05		3.1e-04,6.1e-05	9.9e-05 ,—	1.5e-04,3.1e-05
	36% ,18.5%	36% ,18.5%	44.5% ,23.6%	44.5% ,23.6%	60.7% ,33.3%	60.7% ,33.3%
=9%	3.5e-04 ,1.2e-04	6.1e-04 ,1.2e-04 2.5e-04,6.1e-05		3.1e-04,6.1e-05	8.7e-05 ,—	1.5e-04,1.5e-05
	37.2% ,19.5%	37.2% ,19.5%	46% ,24.9%	46% ,24.9%	62.4% ,34.9%	62.4% ,34.9%
=10%	3.5e-04 ,6.1e-05	6.1e-04,6.1e-05	2.3e-04 ,—	3.1e-04,6.1e-05	7.7e-05 ,—	1.5e-04,1.5e-05
	38.2% ,20.6%	38.2% ,20.6%	47.3% ,26.2%	47.3% ,26.2%	64% ,36.4%	64% ,36.4%
=11%	3.4e-04 ,6.1e-05	6.1e-04,6.1e-05	2.1e-04,—	3.1e-04,6.1e-05	6.8e-05 ,—	7.6e-05 ,1.5e-05
	39.2% ,21.6%	39.2% ,21.6%	48.6% ,27.5%	48.6% ,27.5%	65.5% ,37.9%	65.5% ,37.9%
=12%	3.3e-04 ,6.1e-05	6.1e-04,6.1e-05	2.0e-04 ,—	3.1e-04,3.1e-05	6.1e-05 ,—	7.6e-05 ,7.6e-06
	40.2% ,22.7%	40.2% ,22.7%	49.7% ,28.9%	49.7% ,28.9%	66.9% ,39.5%	66.9% ,39.5%
=13%	3.2e-04 ,6.1e-05	6.1e-04,6.1e-05	1.9e-04,—	3.1e-04,3.1e-05	5.4e-05 ,—	7.6e-05 ,7.6e-06
	41% ,23.8%	41% ,23.8%	50.8% ,30.2%	50.8% ,30.2%	68.1% ,41.1%	68.1% ,41.1%
=14%	3.0e-04 ,6.1e-05	6.1e-04,6.1e-05	1.8e-04,—	3.1e-04,3.1e-05	4.9e-05 ,—	7.6e-05 ,7.6e-06
	41.9% ,24.9%	41.9% ,24.9%	51.8% ,31.6%	51.8% ,31.6%	69.3% ,42.6%	69.3% ,42.6%
=15%	2.9e-04 ,—	6.1e-04,6.1e-05	1.7e-04,—	3.1e-04,3.1e-05	4.4e-05 ,—	7.6e-05 ,3.8e-06
	42.7% ,26.1%	42.7% ,26.1%	52.8% ,32.9%	52.8% ,32.9%	70.5% ,44.2%	70.5% ,44.2%
=16%	2.8e-04 ,—	3.1e-04,6.1e-05	1.6e-04,—	3.1e-04,1.5e-05	4.0e-05 ,—	7.6e-05 ,3.8e-06
	43.4% ,27.4%	43.4% ,27.4%	53.7% ,34.3%	53.7% ,34.3%	71.5% ,45.6%	71.5% ,45.6%
=17%	2.7e-04 ,—	3.1e-04,3.1e-05	1.5e-04,—	3.1e-04,1.5e-05	3.6e-05 ,—	7.6e-05 ,3.8e-06
	44.1% ,28.7%	44.1% ,28.7%	54.6% ,35.6%	54.6% ,35.6%	72.5% ,46.7%	72.5% ,46.7%
=18%	2.6e-04 ,—	3.1e-04,3.1e-05	1.4e-04,—	1.5e-04,1.5e-05	3.2e-05 ,—	3.8e-05 ,3.8e-06
	44.8% ,30%	44.8% ,30%	55.5% ,37.1%	55.5% ,37.1%	73.5% ,47.5%	73.5% ,47.5%
=19%	2.5e-04 ,—	3.1e-04,3.1e-05	1.3e-04,—	1.5e-04,1.5e-05	2.9e-05 ,—	3.8e-05 ,1.9e-06
	45.5% ,31.3%	45.5% ,31.3%	56.3% ,38.6%	56.3% ,38.6%	74.5% ,48.4%	74.5% ,48.4%
=20%	2.4e-04 ,—	3.1e-04,3.1e-05	1.3e-04,—	1.5e-04,7.6e-06	2.7e-05 ,—	3.8e-05 ,1.9e-06
	46.2% ,32.7%	46.2% ,32.7%	57% ,40.1%	57% ,40.1%	75.3% ,49.1%	75.3% ,49.1%
11
Under review as a conference paper at ICLR 2020
Table 5: (US Treasuries) Equivalent ambiguity radius ρ and optimal annualized return R at a given
pair of (, δ).
I pt, Pn ∖ Rt,Rn	Bond: -δ = -5.18%		Bond: -δ = -6.58%		Bond: -δ = -9.98%	
	4th order	2nd order	4th order	2nd order	4th order	2nd order
=1%	1.0e-10,1.5e-08	Inf ,1.5e-08	3.0e-06,5.8e-11	1.9e-05 ,5.8e-11	2.0e-06 ,5.7e-14	9.5e-06 ,5.7e-14
	Inf ,-2.7%	Inf ,-2.7%	-2.09% ,-2.58%	-2.09% ,-2.58%	-1.09% ,-2.57%	-1.09% ,-2.57%
=2%	3.0e-06 ,1.9e-09	1.9e-05 ,1.9e-09	2.0e-06 ,2.8e-14	9.5e-06 ,2.8e-14	2.0e-06 ,2.8e-14	4.8e-06 ,2.8e-14
	-1.65% ,-2.63%	-1.65% ,-2.63%	-1.07% ,-2.57%	-1.07% ,-2.57%	0.143% ,-2.57%	0.143% ,-2.57%
=3%	2.0e-06 ,2.9e-11	9.5e-06 ,2.9e-11	2.0e-06 ,2.8e-14	9.5e-06 ,2.8e-14	1.0e-08 ,2.8e-14	2.4e-06 ,2.8e-14
	-1.05% ,-2.58%	-1.05% ,-2.58%	-0.393% ,-2.57%	-0.393% ,-2.57%	1.1% ,-2.57%	1.1% ,-2.57%
=4%	2.0e-06 ,2.8e-14	9.5e-06 ,2.8e-14	2.0e-06 ,2.8e-14	4.8e-06 ,2.8e-14	1.0e-08 ,2.8e-14	1.2e-06 ,2.8e-14
	-0.58% ,-2.57%	-0.58% ,-2.57%	0.174% ,-2.57%	0.174% ,-2.57%	1.93% ,-2.57%	1.93% ,-2.57%
=5%	2.0e-06 ,2.8e-14	4.8e-06 ,2.8e-14	2.0e-06 ,2.8e-14	4.8e-06 ,2.8e-14	1.0e-08 ,2.3e-10	1.5e-07 ,2.3e-10
	-0.17% ,-2.57%	-0.17% ,-2.57%	0.677% ,-2.57%	0.677% ,-2.57%	2.68% ,-2.59%	2.68% ,-2.59%
=6%	2.0e-06 ,5.7e-14	4.8e-06 ,5.7e-14	1.0e-08 ,2.8e-14	2.4e-06 ,2.8e-14	1.0e-08 ,4.7e-10	3.6e-14 ,4.7e-10
	0.201% ,-2.57%	0.201% ,-2.57%	1.14% ,-2.57%	1.14% ,-2.57%	3.17%,-2.6%	3.17% ,-2.6%
=7%	2.0e-06 ,2.8e-14	4.8e-06 ,2.8e-14	1.0e-08 ,2.8e-14	1.2e-06 ,2.8e-14	1.0e-08 ,9.3e-10	3.6e-14 ,9.3e-10
	0.545% ,-2.57%	0.545% ,-2.57%	1.57% ,-2.57%	1.57%,-2.57%	3.17%,-2.6%	3.17% ,-2.6%
=8%	1.0e-08 ,2.8e-14	2.4e-06 ,2.8e-14	1.0e-08 ,2.8e-14	6.0e-07 ,2.8e-14	1.0e-08 ,9.3e-10	3.6e-14 ,9.3e-10
	0.868% ,-2.57%	0.868% ,-2.57%	1.98% ,-2.57%	1.98% ,-2.57%	3.17% ,-2.61%	3.17% ,-2.61%
=9%	1.0e-08 ,1.9e-09	2.4e-06 ,1.9e-09	1.0e-08 ,2.8e-14	3.0e-07 ,2.8e-14	1.0e-08 ,9.3e-10	3.6e-14 ,9.3e-10
	1.17% ,-2.62%	1.17% ,-2.62%	2.36% ,-2.57%	2.36% ,-2.57%	3.17% ,-2.61%	3.17% ,-2.61%
=10%	1.0e-08 ,4.7e-10	2.4e-06 ,4.7e-10	1.0e-08 ,1.9e-09	1.5e-07 ,1.9e-09	1.0e-08 ,1.9e-09	3.6e-14 ,1.9e-09
	1.47% ,-2.6%	1.47% ,-2.6%	2.74% ,-2.62%	2.74% ,-2.62%	3.17% ,-2.62%	3.17% ,-2.62%
=11%	1.0e-08 ,2.3e-10	1.2e-06 ,2.3e-10	1.0e-08 ,9.3e-10	2.3e-09 ,9.3e-10	1.0e-08 ,1.9e-09	3.6e-14 ,1.9e-09
	1.75% ,-2.59%	1.75% ,-2.59%	3.09% ,-2.61%	3.09% ,-2.61%	3.17% ,-2.63%	3.17% ,-2.63%
=12%	1.0e-08 ,2.8e-14	6.0e-07 ,2.8e-14	1.0e-08 ,9.3e-10	3.6e-14,9.3e-10	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	2.02% ,-2.57%	2.02% ,-2.57%	3.17% ,-2.61%	3.17% ,-2.61%	3.17% ,-2.63%	3.17% ,-2.63%
=13%	1.0e-08 ,2.8e-14	6.0e-07 ,2.8e-14	1.0e-08 ,9.3e-10	7.1e-14,9.3e-10	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	2.28% ,-2.57%	2.28% ,-2.57%	3.17% ,-2.6%	3.17% ,-2.6%	3.17% ,-2.63%	3.17% ,-2.63%
=14%	1.0e-08 ,2.8e-14	3.0e-07 ,2.8e-14	1.0e-08 ,9.3e-10	3.6e-14,9.3e-10	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	2.54% ,-2.57%	2.54% ,-2.57%	3.17% ,-2.6%	3.17% ,-2.6%	3.17% ,-2.64%	3.17% ,-2.64%
=15%	1.0e-08 ,2.8e-14	7.5e-08 ,2.8e-14	1.0e-08 ,9.3e-10	3.6e-14,9.3e-10	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	2.78% ,-2.57%	2.78% ,-2.57%	3.17% ,-2.61%	3.17% ,-2.61%	3.17% ,-2.64%	3.17% ,-2.64%
=16%	1.0e-08 ,2.3e-10	9.3e-09 ,2.3e-10	1.0e-08 ,9.3e-10	3.6e-14,9.3e-10	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	3.03% ,-2.59%	3.03% ,-2.59%	3.17% ,-2.61%	3.17% ,-2.61%	3.17% ,-2.64%	3.17% ,-2.64%
=17%	1.0e-08 ,2.3e-10	3.6e-14,2.3e-10	1.0e-08 ,9.3e-10	3.6e-14,9.3e-10	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	3.17% ,-2.59%	3.17% ,-2.59%	3.17% ,-2.61%	3.17% ,-2.61%	3.17% ,-2.64%	3.17% ,-2.64%
=18%	1.0e-08 ,4.7e-10	3.6e-14,4.7e-10	1.0e-08 ,1.9e-09	3.6e-14,1.9e-09	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	3.17% ,-2.6%	3.17% ,-2.6%	3.17% ,-2.62%	3.17% ,-2.62%	3.17% ,-2.64%	3.17% ,-2.64%
=19%	1.0e-08 ,4.7e-10	7.1e-14,4.7e-10	1.0e-08 ,1.9e-09	3.6e-14,1.9e-09	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	3.17% ,-2.6%	3.17% ,-2.6%	3.17% ,-2.62%	3.17% ,-2.62%	3.17% ,-2.64%	3.17% ,-2.64%
=20%	1.0e-08 ,9.3e-10	3.6e-14,9.3e-10	1.0e-08 ,1.9e-09	3.6e-14,1.9e-09	1.0e-08 ,3.7e-09	3.6e-14 ,3.7e-09
	3.17% ,-2.61%	3.17% ,-2.61%	3.17% ,-2.63%	3.17% ,-2.63%	3.17% ,-2.64%	3.17% ,-2.64%
12
Under review as a conference paper at ICLR 2020
Table 6: (Currencies) Equivalent ambiguity radius ρ and optimal annualized return R at a given pair						
of (, δ).						
(Pt, Pn ∖ Rt,Rn	FX: -δ =	-1.16%	FX: -δ =	-1.40%	FX: -δ	= -1.89%
	4th order	2nd order	4th order	2nd order	4th order	2nd order
=1%	Inf ,1.2e-04	Inf ,1.2e-04	3.5e-04,6.1e-05	6.1e-04,6.1e-05	2.1e-04,3.1e-05	3.1e-04,3.1e-05
	-Inf ,1.76%	-Inf ,1.76%	0.17%,2.89%	0.17% ,2.89%	3.21% ,4.68%	3.21% ,4.68%
=2%	3.5e-04 ,6.1e-05	6.1e-04 ,1.2e-04	2.6e-04 ,6.1e-05	3.1e-04,6.1e-05	1.4e-04,3.1e-05	1.5e-04,3.1e-05
	0.21% ,2.53%	0.21% ,2.53%	2.28% ,3.61%	2.28% ,3.61%	4.85% ,5.47%	4.85% ,5.47%
=3%	3.0e-04 ,6.1e-05	6.1e-04 ,6.1e-05	2.1e-04,6.1e-05	3.1e-04,6.1e-05	1.0e-04,3.1e-05	1.5e-04,3.1e-05
	1.59% ,3.04%	1.59% ,3.04%	3.23% ,4.14%	3.23% ,4.14%	5.87% ,6.04%	5.87% ,6.04%
=4%	2.6e-04 ,6.1e-05	3.1e-04 ,6.1e-05	1.8e-04,3.1e-05	3.1e-04,6.1e-05	8.3e-05 ,1.5e-05	1.5e-04,1.5e-05
	2.31% ,3.46%	2.31% ,3.46%	3.9% ,4.59%	3.9% ,4.59%	6.66% ,6.52%	6.66% ,6.52%
=5%	2.3e-04 ,6.1e-05	3.1e-04 ,6.1e-05	1.5e-04,3.1e-05	3.1e-04,3.1e-05	6.8e-05 ,1.5e-05	7.6e-05 ,1.5e-05
	2.84% ,3.83%	2.84% ,3.83%	4.43% ,4.98%	4.43% ,4.98%	7.3% ,6.96%	7.3% ,6.96%
=6%	2.0e-04 ,6.1e-05	3.1e-04 ,6.1e-05	1.4e-04,3.1e-05	1.5e-04,3.1e-05	5.7e-05 ,7.6e-06	7.6e-05 ,7.6e-06
	3.26% ,4.17%	3.26% ,4.17%	4.87% ,5.34%	4.87% ,5.34%	7.85% ,7.37%	7.85% ,7.37%
=7%	1.9e-04 ,6.1e-05	3.1e-04 ,6.1e-05	1.2e-04 ,3.1e-05	1.5e-04,3.1e-05	5.0e-05 ,—	7.6e-05 ,7.6e-06
	3.62% ,4.5%	3.62% ,4.5%	5.26% ,5.68%	5.26% ,5.68%	8.33% ,7.77%	8.33% ,7.77%
=8%	1.7e-04 ,3.1e-05	3.1e-04 ,3.1e-05	1.1e-04,3.1e-05	1.5e-04,3.1e-05	4.4e-05 ,—	7.6e-05 ,3.8e-06
	3.93% ,4.81%	3.93% ,4.81%	5.6% ,6%	5.6% ,6%	8.77% ,8.15%	8.77% ,8.15%
=9%	1.6e-04 ,3.1e-05	3.1e-04 ,3.1e-05	1.0e-04,1.5e-05	1.5e-04,1.5e-05	3.9e-05 ,—	7.6e-05 ,3.8e-06
	4.21% ,5.1%	4.21%,5.1%	5.91% ,6.31%	5.91% ,6.31%	9.16% ,8.49%	9.16% ,8.49%
=10%	1.5e-04 ,3.1e-05	3.1e-04 ,3.1e-05	9.5e-05 ,1.5e-05	1.5e-04,1.5e-05	3.6e-05 ,—	7.6e-05 ,1.9e-06
	4.47% ,5.39%	4.47% ,5.39%	6.2% ,6.62%	6.2% ,6.62%	9.48% ,8.79%	9.48% ,8.79%
=11%	1.4e-04 ,3.1e-05	3.1e-04 ,3.1e-05	8.8e-05 ,1.5e-05	1.5e-04,1.5e-05	1.0e-08 ,—	3.8e-05 ,1.9e-06
	4.7% ,5.68%	4.7% ,5.68%	6.46% ,6.94%	6.46% ,6.94%	9.76% ,9.08%	9.76% ,9.08%
=12%	1.4e-04 ,3.1e-05	1.5e-04 ,3.1e-05	8.1e-05 ,1.5e-05	1.5e-04,1.5e-05	3.1e-05 ,—	3.8e-05 ,9.5e-07
	4.92% ,5.96%	4.92% ,5.96%	6.7% ,7.25%	6.7% ,7.25%	10% ,9.36%	10% ,9.36%
=13%	1.3e-04 ,1.5e-05	1.5e-04 ,1.5e-05	7.6e-05 ,—	1.5e-04 ,7.6e-06	2.9e-05 ,—	3.8e-05 ,9.5e-07
	5.12% ,6.24%	5.12% ,6.24%	6.93% ,7.57%	6.93% ,7.57%	10.2% ,9.64%	10.2% ,9.64%
=14%	1.2e-04 ,1.5e-05	1.5e-04 ,1.5e-05	7.1e-05 ,—	1.5e-04 ,7.6e-06	2.7e-05 ,—	3.8e-05 ,4.8e-07
	5.3% ,6.53%	5.3% ,6.53%	7.14% ,7.9%	7.14% ,7.9%	10.4% ,9.91%	10.4% ,9.91%
=15%	1.2e-04 ,1.5e-05	1.5e-04 ,1.5e-05	6.7e-05 ,—	7.6e-05 ,3.8e-06	2.6e-05 ,—	3.8e-05 ,2.4e-07
	5.48% ,6.82%	5.48% ,6.82%	7.35% ,8.21%	7.35% ,8.21%	10.6% ,10.1%	10.6% ,10.1%
=16%	1.1e-04 ,1.5e-05	1.5e-04 ,1.5e-05	6.3e-05 ,—	7.6e-05 ,3.8e-06	2.4e-05 ,—	3.8e-05 ,1.2e-07
	5.65% ,7.12%	5.65% ,7.12%	7.54% ,8.51%	7.54% ,8.51%	10.8% ,10.2%	10.8% ,10.2%
=17%	1.1e-04 ,7.6e-06	1.5e-04 ,7.6e-06	5.9e-05 ,—	7.6e-05 ,1.9e-06	2.3e-05 ,—	3.8e-05 ,6.0e-08
	5.81% ,7.43%	5.81% ,7.43%	7.73% ,8.79%	7.73% ,8.79%	11% ,10.3%	11% ,10.3%
=18%	1.0e-04,—	1.5e-04 ,7.6e-06	5.6e-05 ,—	7.6e-05 ,1.9e-06	2.2e-05 ,—	3.8e-05 ,3.0e-08
	5.96% ,7.75%	5.96% ,7.75%	7.9% ,9.06%	7.9% ,9.06%	11.1% ,10.4%	11.1% ,10.4%
=19%	9.7e-05 ,—	1.5e-04 ,7.6e-06	5.4e-05 ,—	7.6e-05 ,9.5e-07	2.0e-05 ,—	3.8e-05 ,1.5e-08
	6.11% ,8.08%	6.11% ,8.08%	8.07% ,9.34%	8.07% ,9.34%	11.3% ,10.4%	11.3% ,10.4%
=20%	9.3e-05 ,—	1.5e-04 ,3.8e-06	5.1e-05 ,—	7.6e-05 ,9.5e-07	1.9e-05 ,—	3.8e-05 ,1.5e-08
	6.25% ,8.39%	6.25% ,8.39%	8.24% ,9.61%	8.24% ,9.61%	11.4% ,10.5%	11.4% ,10.5%
13
Under review as a conference paper at ICLR 2020
Table 7: (Commodities) Equivalent ambiguity radius ρ and optimal annualized return R at a given
pair of (, δ).
, ρn
, Rn
Commodity: -δ = -3.60%
Commodity: -δ = -4.40%
Commodity: -δ = -6.64%
’	4th order	2nd order	4th order 2nd order	4th order	2nd order
7=1%	1.8e-04,3.7e-09 3.1e-04,3.7e-09 1.3e-04,3.7e-09 1.5e-04,3.7e-09 7.1e-05,1.9e-09 7.6e-05,1.9e-09
11.1% ,4.52% 11.1% ,4.52%	14% ,4.54%	14% ,4.54%	21.3% ,4.58% 21.3% ,4.58%
7=2%	1.3e-04 ,3.7e-09 1.5e-04 ,3.7e-09 9.6e-05 ,3.7e-09 1.5e-04 ,3.7e-09 4.8e-05 ,1.9e-09 7.6e-05 ,1.9e-09
14.1%,4.53%	14.1% ,4.53%	17.3%,4.55%	17.3%	,4.55%	26%,4.59%	26% ,4.59%
7=3%	1.1e-04 ,3.7e-09 1.5e-04 ,3.7e-09 8.3e-05 ,1.9e-09 1.5e-04 ,1.9e-09 3.7e-05 ,1.9e-09 7.6e-05 ,1.9e-09
16% ,4.54%	16% ,4.54%	19.5%	,4.56%	19.5%	,4.56%	28.7% ,4.6%	28.7% ,4.6%
7=4%	9.6e-05 ,3.7e-09 1.5e-04 ,3.7e-09 7.2e-05 ,1.9e-09 7.6e-05 ,1.9e-09 3.1e-05 ,9.3e-10 3.8e-05 ,9.3e-10
17.4%,4.54%	17.4% ,4.54%	21.2%,4.56%	21.2%	,4.56%	30.5%,4.61%	30.5%,4.61%
7=5%	8.7e-05 ,3.7e-09 1.5e-04 ,3.7e-09 6.5e-05 ,1.9e-09 7.6e-05 ,1.9e-09 2.6e-05 ,9.3e-10 3.8e-05 ,9.3e-10
18.6% ,4.55%	18.6%	,4.55%	22.6%	,4.57%	22.6%	,4.57%	31.8% ,4.62%	31.8% ,4.62%
7=6%	8.0e-05 ,1.9e-09 1.5e-04 ,1.9e-09 5.8e-05 ,1.9e-09 7.6e-05 ,1.9e-09 2.2e-05 ,9.3e-10 3.8e-05 ,9.3e-10
19.6%,4.55%	19.6%	,4.55%	23.9%,4.57%	23.9%	,4.57%	32.9%,4.62%	32.9%,4.62%
7=7%	7.4e-05 ,1.9e-09 1.5e-04 ,1.9e-09 5.3e-05 ,1.9e-09 7.6e-05 ,1.9e-09 2.0e-05 ,9.3e-10 3.8e-05 ,9.3e-10
20.6% ,4.56%	20.6%	,4.56%	25% ,4.58%	25% ,4.58%	33.9% ,4.63%	33.9%	,4.63%
7=8%	7.1e-05 ,1.9e-09 7.6e-05 ,1.9e-09 4.8e-05 ,1.9e-09 7.6e-05 ,1.9e-09 2.0e-05 ,4.7e-10 1.9e-05 ,4.7e-10
21.4% ,4.56%	21.4%	,4.56%	26% ,4.59%	26% ,4.59%	34.7% ,4.64%	34.7%	,4.64%
7=9%	6.5e-05 ,1.9e-09 7.6e-05 ,1.9e-09 4.5e-05 ,1.9e-09 7.6e-05 ,1.9e-09 1.6e-05 ,4.7e-10 1.9e-05 ,4.7e-10
22.1% ,4.57%	22.1%	,4.57%	26.8% ,4.59%	26.8% ,4.59%	35.5% ,4.65%	35.5%	,4.65%
7=10%	6.5e-05 ,1.9e-09 7.6e-05 ,1.9e-09 4.1e-05 ,1.9e-09 7.6e-05 ,1.9e-09 1.4e-05 ,4.7e-10 1.9e-05 ,4.7e-10
22.8% ,4.57%	22.8%	,4.57%	27.6%	,4.6%	27.6% ,4.6%	36.2% ,4.65%	36.2% ,4.65%
7=11%	5.8e-05 ,1.9e-09 7.6e-05 ,1.9e-09 3.7e-05 ,9.3e-10 7.6e-05 ,9.3e-10 1.4e-05 ,2.3e-10 1.9e-05 ,2.3e-10
23.4% ,4.58%	23.4%	,4.58%	28.2%	,4.6%	28.2% ,4.6%	36.8% ,4.66%	36.8% ,4.66%
7=12%	5.7e-05 ,1.9e-09 7.6e-05 ,1.9e-09 3.7e-05 ,9.3e-10 7.6e-05 ,9.3e-10 1.1e-05 ,2.3e-10 1.9e-05 ,2.3e-10
24% ,4.58%	24%,4.58%	28.7%,4.61% 28.7% ,4.61% 37.4%,4.67% 37.4%,4.67%
7=13%	5.3e-05 ,1.9e-09 7.6e-05 ,1.9e-09 3.6e-05 ,9.3e-10 3.8e-05 ,9.3e-10 1.1e-05 ,1.2e-10 1.9e-05 ,1.2e-10
24.6% ,4.59%	24.6%	,4.59%	29.2%	,4.61%	29.2%	,4.61%	38% ,4.68%	38% ,4.68%
7=14%	5.2e-05 ,1.9e-09 7.6e-05 ,1.9e-09 3.3e-05 ,9.3e-10 3.8e-05 ,9.3e-10 9.0e-06 ,5.8e-11 1.9e-05 ,5.8e-11
25.2% ,4.59%	25.2%	,4.59%	29.7%	,4.62%	29.7%	,4.62%	38.5% ,4.69%	38.5% ,4.69%
7=15%	5.0e-05 ,1.9e-09 7.6e-05 ,1.9e-09 3.2e-05 ,9.3e-10 3.8e-05 ,9.3e-10 9.0e-06 ,2.9e-11 9.5e-06 ,2.9e-11
25.7% ,4.6%	25.7%	,4.6%	30.1%	,4.62%	30.1%	,4.62%	39% ,4.69%	39% ,4.69%
7=16%	4.8e-05 ,9.3e-10 7.6e-05 ,9.3e-10 3.1e-05 ,9.3e-10 3.8e-05 ,9.3e-10 9.0e-06 ,1.5e-11 9.5e-06 ,1.5e-11
26.2% ,4.6%	26.2%	,4.6%	30.5%	,4.63%	30.5%	,4.63%	39.5% ,4.7%	39.5% ,4.7%
7=17%	4.5e-05 ,9.3e-10 7.6e-05 ,9.3e-10 2.9e-05 ,4.7e-10 3.8e-05 ,4.7e-10 7.0e-06 ,2.3e-13 9.5e-06 ,2.3e-13
26.6% ,4.61% 26.6% ,4.61%	30.8% ,4.64% 30.8% ,4.64% 39.9% ,4.71% 39.9% ,4.71%
7=18%	4.3e-05 ,9.3e-10 7.6e-05 ,9.3e-10 2.8e-05 ,4.7e-10 3.8e-05 ,4.7e-10 7.0e-06 ,1.4e-14 9.5e-06 ,1.4e-14
27% ,4.61%	27% ,4.61%	31.2%	,4.64%	31.2%	,4.64%	40.4% ,4.71%	40.4%	,4.71%
7=19%	4.2e-05 ,9.3e-10 7.6e-05 ,9.3e-10 2.8e-05 ,4.7e-10 3.8e-05 ,4.7e-10 6.0e-06 ,1.4e-14 9.5e-06 ,1.4e-14
27.4% ,4.62%	27.4% ,4.62%	31.5%	,4.65%	31.5%	,4.65%	40.8% ,4.71%	40.8%	,4.71%
7=20%	4.1e-05 ,9.3e-10 7.6e-05 ,9.3e-10 2.6e-05 ,4.7e-10 3.8e-05 ,4.7e-10 6.0e-06 ,1.4e-14 9.5e-06 ,1.4e-14
27.7% ,4.62%	27.7% ,4.62%	31.8%	,4.66%	31.8%	,4.66%	41.2% ,4.71%	41.2%	,4.71%
A.2 Proofs
We are going to present proofs about the theorems stated in the main paper in details.
We first introduce the definition of Regular Measure of Deviation, which was introduced in Rock-
afellar & Uryasev (2013) (also see Gotoh et al. (2018)) and is useful in the proof of Theorem 3.1.
Definition A.1. Given any probability space (Ω, F, P), let L2(Ω) denote the space of square-
integrable random variables, i.e., Er〜P[X2] < ∞. A functional D : L2(Ω) → [0, ∞] is said to
be a regular measure of deviation if it is closed convex and satisfies:
1.	D(c) = 0for any constant c ∈ R;
2.	D(Z) > 0 for any (non-constant) random variable Z ∈ L (Ω).
With the definition, we are able to complete the proof of Theorem 3.1.
14
Under review as a conference paper at ICLR 2020
Proof of Theorem 3.1. We need to check that the quantity Dη2,φ,P0 (f (x, r)|E[f (x, r)]) defined in
Theorem 3.1 satisfies the conditions stated in definition A.1. It is easy and is thus omitted.
Write minp∈u Er〜P [f (x, r)] as
min Er 〜P [f(x, r)] s.t. D(P ||Po) ≤ ρ.
Applying changing of measure, it is equivalent to solving
minE [f (x, r)L]	s.t. E [φ(L)] ≤ ρ and E [L] = 1.	(A.1)
Here, L is the likelihood ratio. The Lagrangian function is
l(L,η1,η2) = E [f (x, r)L] +η2(E[φ(L)] - ρ) +η1(E[L] - 1).
Under mild conditions such that strong duality holds, Eq. (A.1) is equivalent to solving its dual
maxη1∈R,η2≥0 minL l(L, η1, η2), which is
η1∈mR,aηx2≥0 mLin {E [f (x, r)L] + η2(E [φ(L)] - ρ) + η1(E [L] -1)}.
(A.2)
Eq. (A.2) allows us to eliminate L. Now,
max min {E [f (x, r)L] + η2(E [φ(L)] - ρ) + η1(E [L] - 1)}
η1 ∈R,η2≥0 L
max -η2 ρ - η1 - η2 max E
η1∈R,η2≥0	2	1	2 L
(f(x，r) + η1) L- E [φ(L)]l .
η2
—
Suppose that the maximization sign ‘max’ and the expectation sign E can be interchanged. Making
use of the definition of conjugate φ*(∙), we have
max	-η2ρ - η1 - η2
η1 ∈R,η2 ≥0
E max
L
max	-η2ρ - η1 - η2 E φ
η1 ∈R,η2 ≥0
η2
(f (x, r) + η1)
η2
(f(x, r) + ηI) L -
—
*
—
-mi≥o η+m⅛ 卜1+上 e [φ* (-η2(f (x，r)+η1))]}
-min [ — + Dn2,Φ,Po(f (x, r)|E[f(x, r)]) - E[f(x, r)]
η2 ≥0	η2
=E [f (x，r)] - m≥1θ{ p + Dn2 ,φ,P0 (JH r)|E [f (x，r)])}.
The second last equality holds, since if we let ηι = ηι - E [f (x, r)], we have
Dη2,φ,P0 (f (x, r)|E[f (x, r)]) := min
η1
min
ηι
[ηι + η1 E [φ* (η2(E[f (x, r)] - f (x, r) - ηι))]}
η1 + n1 E[φ* (η2(-f(χ, r)-η1))]}+e [f (x, r)].
The second last equality holds by letting rjι = ηι - E [f (x, r)]. Lastly, We apply Result A.2 which
guarantees that the maximization sign ‘max’ and the expectation sign E can be interchanged (see
for example, Ben-Tal & Teboulle (2007) and Hu et al. (2013)). The proof is completed.
□
Result A.2. Let Ω be a σ-finite measure space, and let Y := Lp(Ω, F, P), P ∈ [1, +∞]. Let
g : R X Ω → (-∞, +∞] be a normal integrand, and define on Y the integral functional Ig (y):=
∕ω g(y(ω),ω)P(dω). Then,
inf	g(y(ω), ω)P (dω) =	inf g(s, ω)P (dω),
x∈Y Jω	Jω S
provided that the left-hand side is finite. Moreover,
y ∈ arg min Ig (y) = y(ω) ∈ arg min g(s,ω), a.e. on ω ∈ Ω.
y∈Y g	s∈R
15
Under review as a conference paper at ICLR 2020
Proof of Result A.2. The proof can be found in Theorem 14.60 of “Variational analysis (Rockafel-
lar & Wets, 2009)”.	口
Followed by Theorem 3.1, we prove Lemma 3.2. What we are going to do is to express the quantity
Dη2,φ,P (f (x, r)|E [f (x, r)]) as a series.
Proof of Lemma 3.2. Denoting X = f(x, r) - E [f (x, r)], we recall that
Dη2,Φ,P0 (f(x, r)∣E[f(x, r)]) = min [ηι + 1~ E [Φ* (η2(E [f (x, r)] - f(x, r) — ηι))]l
η1	η2
=min [ηι + -1E [φ* (η2(-X - ηι))]∖ .
η1	η2
Applying Taylor expansion on φ*(∙) around 0 under the assumption that E [X k] exists for all k ≤ n,
the expansion of φ* (η2(-X - ηι)) UPto order n is:
n
X
k=2
η2-1(-i)k (OF®) (0)E
k!
(X + η1)k
n-1
X
k=1
ηk(-i)k+1(φ*)(k+1) (0) E
(k + i)!
(X + η1)k+1 .
It remains to compute (φ*)(k+1) (ξ). We start from the definition of φ*(ξ) = sup2>。{zξ - φ(z)}.
Let z(ξ) be the optimizer, then We obtain φ*(ξ) = z(ξ)ξ - φ(z(ξ)). Differentiating it gives
(φ*)⑴(ξ) = Z⑴(ξ)ξ + z(ξ) - φ⑴(z(ξ))z⑴(ξ) = z(ξ). The last equality follows from the first
order optimality condition, which gives that ξ - φ(1)(z(ξ)) = 0. As a result, (φ*)(k+1)(ξ) = z(k)(ξ)
and it suffices to find z (k) (ξ).
The term z (k) (ξ) can be found from the first order optimality condition. If we differentiate it
on both sides w.r.t. ξ, we obtain φ(2) (z(ξ))z (1) (ξ)
i.
This means that z(1) (ξ)
(k-1)
and hence z(k)(ξ) = [φ(2)(Z(ξ))]
minη1 Pkn=-11bkE h(X + η1)k+1i η2k.
for k ≥ 2.
1
φ(2)(z(ξ))
Denoting 谓 be the optimal solution to
We then show that z(0) = 1. From the definition of φ*(ξ), we know that φ*(0) = 0 so that
φ(z(0)) = 0. If z(0) := a 6= i, then φ(x) = 0 for any x lying between i and a according to the
definition of φ. This means that φ(n)(x) = 0 for any n ∈ N and x is a point lying between i and a.
Note that φ(2)(1) = 0 and φ is an ∞-differentiable function. Ee can find a point X lying in between
1 and a (indeed, close to 1) such that φ(2)(x) = 0, so an contradiction arises. The proof of Lemma
is completed.	口
We move to the proof of Corollary 3.3:
Proof of Corollary 3.3. We prove for the case when φ-divergence is chosen as Cressie Read diver-
gence with θ > 2. The case when φ-divergence is chosen as KL divergence is similar and is omitted.
First, we compute the first four derivatives of φ-divergence when it is a Cressie Read divergence,
which gives
θ-1
φ(1)(t) = π—『,Φ(2)(t)= tθ-2, Φ(3)(t) = (θ - 2)tθ-3, Φ(4)(t) = (θ - 2)(θ - 3)tθ-4.
1-θ
In the proof ofLemma 3.2, we know that (φ*)(k)(∙) can be obtained from Z(I) (∙), z(2)(∙) and z(3)(∙).
We omit detailed deviations, and we can obtain z(1) (0) = 1, z(2) (0) = -(θ - 2) and z(3) (0) =
16
Under review as a conference paper at ICLR 2020
(θ - 2)(2θ - 3). Now, assuming X = f(x, r) - E [f (x, r)], this means that
Dη2,φ,P0 (f (x, r)|E [f (x, r)])
min
η1
η2E (X + η1)2
2!
(A.3)
η2(θ - 2)E [(X + ηι)3]十 η3(θ - 2)(2θ - 3)E [(X + ηι)4]
3!
4!
We need to shoW that the local optimizer η1 of Eq. (A.3) is a root of a cubic equation. Indeed, the
objective function is a polynomial ofη1 With degree 4, Which can be reWritten as a0 + a1η1 +a2η12 +
a3 η13 + a4η14, Where
a0
η2E [X2]	(θ - 2)η2E [X3]	(θ - 2)(2θ - 3)η3E [X4]
+----丁一 +
24
(A.4)
a1
(θ - 2)η2E [3X2] + (θ - 2)(2θ - 3)η3E [4X3]
24
(A.5)
a2
η2
T +
(θ - 2)(2θ - 3)η23E 6X2
24
(A.6)
a3
a4
(θ - An
6	,
(θ - 2)(2θ - 3)η23
(A.7)
24
(A.8)
Since θ > 2, we have (θ - 2)(2θ - 3) > 0 and so
(θ-2)(2θ-3)η3
4!
> 0. We can therefore find a local
minimum (global minimum). The local optimal points should satisfy a1 +2a2η1 +3a3η12 +4a4η13=
0. It is not difficult to obtain Eq. (8) from Eqs. (6), (A.5), (A.6), (A.7) and (A.8).
It remains to show that the local optimal obtained is indeed a local minimum. This can be done by
examining if 2a2 + 6a3η1 + 12a4η12 ≥ 0 for local optimal η1. Indeed,
2a2 + 6a3η1 + 12a4η12
=2η2
(θ-2)(2θ-3)
2 2 θ-2
η2η2 + -ɪ
η1η2+2+(θ - 2)(2θ - 3)η2E [X 2]
2η2
~T
(θ - 2)(2θ - 3) [η1η2 + 访二
2θ - 3
+ 而 + + (θ - 2)(2θ - 3)η2E
2θ - 3
≥ 0.
+
4
6
6
4
Therefore, We can further simplify Dη2,φ,p>o (f (x, r) ∣Er~p0 [f (x, r)]) if ηι exists for a real solution
of a1 + 2a2η1 + 3a3η12 + 4a4η13 = 0 and can be expressed explicitly.
The remaining in the proof shoWs hoW to find the explicit formula of the local optimizer η1 . We
examine 4 for a triple polynomial equation. When 4 > 0, We knoW that the local optimal η1 can
be expressed as U - 3U - 43 such that
a2
P =-----
2a4
—
3a2	_ a3 a2a，3 aι	A _ 2	4p3	_ ɜ/-q + √4
iβθf, q = 32θf - ^80f + 404,	= q + "27, U = V 2
which follows from Cardano formula for a cubic equation. This follows from the fact that p ≥ 0,
since
a2
P =--------
2a4
1
=------TT
16a4
η24
3a2
16a4
(θ — 2)(2θ — 3)η3Er~p [6X2] ∖ ((θ — 2)(2θ —
24
24
-3 ( T 1
192a2
(θ - 2)(3θ - 4) + (θ - 2)2(2θ - 3)2η22E X2	≥ 0.
—
8居+
17
Under review as a conference paper at ICLR 2020
This completes the proof.
□
Before presenting proofs of Theorem 3.5 and 3.6, it is necessary to study any properties of the
function f (x) = a√xτΣx - XTb with a > 0 and a vector b. Indeed, it is a convex function. The
proof is tedious and can be completed using Cauchy Schwartz inequality. Now, we are ready to
present the proofs of Theorem 3.5 and Theorem 3.6. The proofs are presented sequentially.
Proof of Theorem 3.5. According to the symbols defined and let b
plification, Eq. (9) is equivalent to
∖∣φ(2pi) for notational sim-
mann-χTμ+bκO ⇔L	-CfxTμ+bκ}∙
Clearly, itis a convex optimization problem. Applying Lagrangian multiplier method, let us examine
bΣx
-μ +	/ T + λe = 0,	(A.9)
xTΣx
xTe = 1.	(A.10)
Let x(λ) = μT。8--^)-%. From the assumption of λ, λ satisfies
eτΣ-1e ∙ λ2 - 2λμτΣ-1e + (μτΣ-1μ - b2)=0
for two real roots, where we denote them as
_ μτΣ-1 e + P(μτΣ-1e)2 - (eTΣ-1e)(μτΣ-1μ - b2)
λ+ =	eT Σ-ie	-,
_ μτΣ-1 e - P(μτΣ-1e)2 - (eTΣ-1e)(μτΣ-1μ - b2)
λ- =	eτ Σ-1e	.
If (μτΣ-1e)2 — (eTΣ-1e)(μτΣ-1μ — b2) > 0, then We have
bΣx(λ)
-μ + Px(λ)TΣx(λ) + e
=_	,	b(μ - λe)	P(μTΣ-1e- λeτΣ-1 e)2
=-μ + p(μ - λe)TΣ-I(μ - λe)	μTΣ-1e - λeTΣ-1e	+ λe = 0,
iff ":丁晨匚::丁装一3=1. Note that μτΣ-1e - λ+eτΣ-1e < 0 < μτΣ-1e - λ-eτΣ-1e,
so the point μτΣ-1e - λ+eτΣ-1e is rejected. Therefore, there is one local optimal solution and it
is at x(λ-) with optimal values *t∑-1 e-(μ-T∑-1 e
where the last equality follows from Eq. (A.9).

-b
μτΣ-1μ-2λ-μτΣ-1e+λ-eτΣ-1e
(μτ ∑-1e-λ-eT ∑-1e)2
λ

If (μτΣ-1e)2 - (eτΣ-1e)(μτΣ-1μ - b2) < 0, no real roots for λ+ and λ- exist. This means that
no local optimal solutions exist.
We can draw the same conclusion as in Theorem 3.5 using the same notations in Theorem 3.5.	□
Finally, we give the proof of Theorem 3.6.
Proof of Theorem 3.6. According to the symbols defined, problem (10) in the main paper is equiv-
alent to
C	^TI	(	- minχ{-xτ μ}
√	,	∕7√x∈X^	ʃ μ < 力	⇔ ∖ s.t.	xτe = 1
ls.t.	κ9'xτσx	- x μ ≤ δ I	κ(e)√xτΣX	- xτμ ≤ δ
18
Under review as a conference paper at ICLR 2020
Applying KKT, it is equivalent to examine
〜
，一 r、	λα∑x	~
—(1 + χ)μ +	√ XT ∑x	+ θe = 0,	(A.11)
	θ(xτe	—1)=0,	(A.12)
Λ{k(e)√ xt ∑	x — xτ μ	—δ} =0,	(A.13)
		〜 λ ≥ 0.	(A.14)
~
~
~ ~
From Eq. (A.11), we know that x is linearly dependent of (1 + λ)μ - θe. Let x = x(λ, θ)
Σ 1 [(l+λ)μ-f9e]
eτ ∑-i[(1+λ)μ-(9e]
〜
5T1	.	∙	1	/'.	∙	i' 1 T	1	∕⅛ T-I	1 -	Z * Λ C∖ ^∖	/	l-∖	.t	♦	1 .
What is left is to find λ and θ. From Eq. (A.13), λ = 0, otherwise we obtain
θe = μ from Eq. (A.11), which is a contradiction in general. Hence, we only need to consider
∖ ∖ `
λα∑x
X XT ∑x
~
+ θe = 0,
K(E) λ/ XT ∑x — XT μ — δ = 0.
(A.15)
(A.16)
，一 r >
-(1 + λ) μ +
Now, the terms xτμ, ∑x, and √xτ ∑x are:
E	T-.	~ .	~-	-.	~ ,	~-
T μ ∑	[(1	+ λ)μ —	θe]	[(1 + λ)μ	— θe]
X μ = --------------H----H—,	∑x =--------------H------H—
eτ∑-1[(1 + λ)μ — θe],	eτ∑-1[(1 + λ)μ — θe]
/	Y[(1 + λ)μ — θe]τ ∑-1[(I + λ)μ — θe]
x1 ∑x =	.
IeT ∑-1[(1 + λ)μ — θe]∣
This suggests that Eq. (A.15)
~ .	~-	.E	T-.	~ .
∖ XK(E)[(1 + λ)μ	— θe]	|e ∑— [(1	+ X)μ	— θe]1	不 C ∩
—(1 + λ) μ H+ θe = 0
eT∑-1[(1 + x)μ — θe] J[(1 + X)μ - Xe]T∑-1[(1 + X)μ - Xe]
(A.17)
and Eq. (A.16)
κ(e)√[(1 + x)μ — θe]r∑-1[(1 + λ)μ — θe]	〃T∑-i[(1 + χ)μ — θe]
----------------------≈-----≈-------------- - ----------≈------≈--- — δ	0
|eT ∑-1[(1 + λ)μ — θe]∣	eT ∑-1[(1 + X)μ — θe]
K(E) J[(1 + x)μ - θe]T∑-1[(1 + λ)μ - θe]	μT∑-1[(1 + χ)μ — θe]
—⇒	~	~	—	~	~	I δ.	(A.18)
|eT ∑-1[(1 + λ)μ — θe]∣	eT ∑-1[(1 + X)μ — θe]
We obtain the first relation between λ and θ by substituting Eq. (A.18) into Eq. (A.17):
λ(κ(E))2 = μT ∑-1[(1 + χ)μ — χe] + δeT ∑-1[(1 + χ)μ — χe].	(A.19)
Now, from Eq. (A.17), together with the constraint that xTe = 1, we have the second relation
(1 + λ) (μT∑ 1 [(1 + λ)μ — θe]) (eT∑ 1 [(1 + χ)μ — χe]) — X(eT∑ 1 [(1 + λ)μ — θe])2 =
+ λκ(e)”[(1 + λ)μ — θe]T ∑-1[(1 + λ)μ — θe]|eT ∑-1 [(1 + X)μ — θe]∣.
Squaring the above relation on both sides, we have the reformulations of the left hand side and the
right hand side:
L.H.S
{(1 + χ) (μT∑ 1 [(1 + λ)μ — χe]) (eT∑ 1 [(1 + λ)μ — θe]) — B(eT∑ 1 [(1 + λ)μ — χe])2 }
=(eT∑ 1 [(1 +	λ)μ —	θe])	{(1 + χ)	(μ'∑ 1 [(1 + χ)μ	— θe])	—	6*(eT∑	1 [(1 + λ)μ	— θe])}.
19
Under review as a conference paper at ICLR 2020
R.H.S
〜,.Γ------7----…---------7----r-. ― 一 -.	~一
J Λκ(e) γ [(1 + λ)μ — θe]TΣ- [(1 + X)μ — θe] |e Σ [(1 + λ)μ — θe] |
=(λκ(e))2[(1 + λ)μ — θe]T Σ-1[(1 + λ)μ — θe](eT Σ-1[(1 + λ)μ —石e])2.
ɪʌ . 1	• 1	1	.1	.	/Tc 一 1 Γ / -I . T ∖	X 1 \ 9	< ∙	<	F 1 •	.	1(-1	1	.	1
Both sides have the term (eTΣ 1[(1 + λ)μ — θe])2 which can be eliminated. So it reduces to have
{(1 + λ) “Σ-1[(1 + λ)μ — θe]) — θ(eτΣ-1 [(1 + λ)μ — θe])}2
=(λκ(e))2[(1 + λ)μ — θe]τ Σ-1[(1 + λ)μ — θe]
⇔[(1 + λ)μ — θe]τ Σ-1[(1 + λ)μ — θe] = (λκ(e))2.
Lastly, fromtheL.H.S ofEq. (A.17) andthefactthat [(1+λ)μ—θe]τΣ-1[(1+λ)μ—θe] = (λκ(e))2
proved, it can be seen that
r-r-,	一〜〜
|eT Σ-1[(1 + λ)μ — θe]∣
一 ~ ~
eτ Σ-1[(1 + λ)μ — θe]
1 ⇔ eτΣ-1[(1 + λ)μ — θe] > 0.
Moreover, if we can solve λ and θ, from Eq. (A.15) and Eq. (A.16), it can be seen that the optimal
value, which equals to λxτμ, can be expressed as X(—xTμ + K(E)√xτΣx) + θ = λδ + θ.
Now, applying the given notations that A = eτΣ-1e, B = μτΣ-1 e, and C = μτΣ-1μ, we can
summarize the following conditions:
λκ(e)2 = [(1 + λ)C — θB] + δ[(1 + NB — θA],	(A.20)
(λκ(e))2 = [(1 + λ)2C — 2θ(1 + λ)B + θ2A],	(A.21)
~
λ ≥ 0,	(A.22)
,	~、一	≈ .
(1 + λ)B — θA > 0.	(A.23)
We then solve λ explicitly.
From Eq. (A.19), we have
~
θ
B + δA
(A.24)
Substituting the expression of θ into Eq. (A.21), we acquire a quadratic equation as follows
一	~	.	. C	~	,	.
(λκ(e))2 = (1	+ λ)2C	— 2 —W +(CδB)+ *(C +	)(1 + λ)B
B + δA
C ~	. . C	~ ,	. ∖ 2
—Λκ(e) + (C + δB) + Λ(C + δB) ʌ
BTjA	A A
⇒ (λκ(e))2(B + δA)2 = (1 + λ)2(B + δA)2C
—2(B + JA)[—λκ(e)2 + (C + δB)(1 + λ)](1 + λ)B
+ (—凌κ(e)2 + (C + δB)(1 + λ)) A
__~c	___
⇒ Mλ2 — 2Gλ + H = 0,
where the terms M, G, and H are
M =[κ(e)2 — (Aδ2 + 2Bδ + C )][AC — B2 — Aκ(e)2],
G =(B2 — AC )[κ(e)2 — (Aδ2 + 2Bδ + C)],
H =(B2 — AC )(Aδ2 + 2Bδ + C)
20
Under review as a conference paper at ICLR 2020
after simplifications. Now, the roots of λ can be computed as
〜 λ+ =	「 y≡1,	(A.25)
〜 入一二	「 y≡1.	(A.26)
Simplifying the term G2 - MH using the definition that K = (B2 - AC) and L = Aδ2 +2Bδ + C,
we obtain
G2 - MH = K2[κ(e)2 - L]2 - KL{[AL + AC - B2]κ(e)2 + KL - Aκ(e)4}
=KK(E)2[(K + AL)(K(E)2 - L) - (K + AC - B2)L] = Kκ(e)2[(B + δA)2(κ(e)2 - L)] = κ(e)2(B + δA)2G.
The second last equality follows since K+AL = B2 - AC+δ2A2 +2δAB+AC = (B + δA)2 and
(K + AC - B2) = 0. We can get θ+ and θ- by substituting λ+ and λ- in Eq. (A.24), respectively.
λ+ and X_ are given in Eq. (A.25) and Eq. (A.26). Note that G2 - MH = k(e)2(B + δA)2[(B2 -
AC )(k(e)2 - (Aδ2 +2Bδ + C)]. Hence G2 - MH > 0 ⇔ (B2 - AC )(k(e)2 - (Aδ2 +2Bδ + C) >
0 ⇔ 0 ≤ k(e)2 < Aδ2 + 2Bδ + C since B2 - AC ≤ 0 by Cauchy inequality.
The signs of G and H are important in completing the remaining of the proofs, from which we find
that G ≥ 0 and H ≤ 0. Now, we are able to prove the statement case by case.
Case 1: B + δA > 0 and AC-B? < k(e)2 < Aδ2 + 2Bδ + C.
In this case, M = [k(e)2 - (Aδ2 + 2Bδ + C)][AC - B2 - AK(E)2] > 0. Now, we can consider the
signs of λ+ and 又_. Clearly, G2 - MH ≥ G2 ⇒ √G2 - MH ≥ G. This gives that λ+ ≥ 0 and
λ- ≤ 0 so that the only choice for λ is λ+. Substituting λ+ obtained into Eq. (A.24), we obtain
〜
θ+
~	.	. C	~	.,	.
-Λ+k(e) +(1 + λ+)(C + δB)
B + δA
Also, from the given conditions that B + δA > 0 together with Eq. (A.24) and Eq. (A.25) for λ+,
we obtain
, ~ ~
(1 + λ+)B - θ+A
√G2 - MH
[B + δA][(Aδ2 + 2Bδ + C) - k(e)2]
> 0.
This means that the optimal solution and optimal value of Eq. (10) are
~ ~
Σ-1[(1+赛+)*-d+e]
eτ ∑-1 [(1+入+)*—^+ e]
and
λ+δ + θ+, respectively, since the conditions (A.20), (A.21), (A.22) and (A.23) are satisfied.
In this case, we can compare the optimal value of problem (10) and the optimal value of problem
(9). This is done by considering
λ+δ + 京+-λ*
ʌ ` (1 + λ+)(C + δB) - λ+κ(E)2	B-√Δ
=λ+δ +--------BTjA----------------L
λ+(δ2A + 2δB + C - k(e)2)	CA - B2 √Δ
B + δA	+ A(B + δA) + ɪ >
Case 2: B > 0, B + δA < 0, and AC-B? < k(e)2 < δ2A + 2δB + C.
In this case, we check the equation A.23
(1 + λ+)B - θ+A
√G2 - MH
[B + δA][(Aδ2 + 2Bδ + C) - k(e)2]
< 0.
This means that the conditions (A.20), (A.21), (A.22) and (A.23) are not satisfied. We cannot have
a local optimal solution.
21
Under review as a conference paper at ICLR 2020
Next, We prove that under the given conditions, We cannot find X such that XTe = 1 and
K(E)√xtΣx - xTμ ≤ δ are satisfied. We consider
min K(C) vXτ∑X^ — XT μ s.t. XT e = 1.
From the Proof of Theorem 3.5 and the given condition that κ(c)2 > B2AAc, we find that the
optimal solution is B-VzB -AC+AM') . Since κ(c)2 < δ2A + 2δB + C and B + δA < 0, we know
that
B - /B2 - AC + AK(C)2	B - √B2 + 2δAB + δ2A2
A	›	A
B - |B + δA∣	2B + δA 2B ,,
=-a— = r- = ɪ+δ>δ
when B > 0. This means that no feasible solution in this case exists.
Case 3: k(c)2 < AC-B2. We check the signs of λ+ and λ-. M = [κ(c)2 - (Aδ2 + 2Bδ +
C)][AC-B2 - AK(C)2] < 0. Then 0 < G2 - MH ≤ G2. As a result,
~
ʌ+
G + √G2 - MH
M
~
λ-
G - √G2 - MH
M
< 0,
G-√G2	C
<^- = 0.
This means that (A.20), (A.21), (A.22), and (A.23) are not satisfied. Hence, no local optimal solution
for problem (10) exists.	口
22