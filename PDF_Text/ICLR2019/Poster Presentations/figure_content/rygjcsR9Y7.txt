Figure 1: Schematic overview of our model architecture. Time series from the data space [green] are encodedby a neural network [black] time-point-wise into the latent space. The latent data manifold is approximatedwith a self-organizing map (SOM) [red]. In order to achieve a discrete representation, every latent data point(ze) is mapped to its closest node in the SOM (zq). A Markov transition model [blue] is learned to predictthe next discrete representation (zqt+1) given the current one (zqt). The discrete representations can then bedecoded by another neural network back into the original data space.
Figure 2: Images generated from a section of the SOM-VAE’s latent space with 512 embeddings trained onMNIST. It yields a discrete two-dimensional representation of the data manifold in the higher-dimensionallatent space.
Figure 3:	Histograms of entropy distributions (entropy on the x-axes) over all Lorenz attractor subtrajectories[a] of 100 time steps length in our test set. Subtrajectories without a change in attractor basin are colored inblue, the ones where a change has taken place in green.
Figure 4:	Comparison of the patient state representations learned by different models. The clusters are coloredby degree of patient abnormality as measured by a variant of the APACHE physiology score (more yellowmeans “less healthy”). White squares correspond to unused clusters, i.e. clusters that contain less than 0.1percent of the data points. Subfigure (d) shows two patient trajectories in the SOM-VAE-prob representationover their respective whole stays in the ICU. The dots mark the ICU admission, the stars the discharge fromthe ICU (cured [green] or dead [red]). It can be seen that our model is the only one that learns a topologicallyinterpretable structure.
Figure S1: (a) shows the difference in distribution of the acute physiology score in the next 24 hours, betweentime-points assigned to the most abnormal cell in the SOMVAEprob map with coordinates [2,0] vs. a normalcell chosen from the middle of the map with coordinates [4,3]. It is apparent that the distributions arelargely disjoint, which means that the representation induced by SOMVAEprob clearly distinguishes theserisk profiles. Statistical tests for difference in distribution and location parameter are highly significant atp-values of p ≤ 10-3, as we have validated using a 2-sample t-test and Kolmogorov-Smirnov test. In (b-c)the enrichment of the map for the mean acute physiology score in the next 6 and 12 hours is shown, forcompleteness. The enrichment patterns on the 3 maps, for the future horizons {6, 12, 24}, are almost identical,which provides empirical evidence for the temporal stability of the SOMVAEProb embedding.
Figure S2: (a) Dynamic mortality risk in the next 24 hours. (b) Short-term dynamic mortality risk in the next 6hours. We observe that the left-edge and right-edge regions of the SOMVAEprob map which are enriched forhigher acute physiology scores (see Fig 4c) also exhibit elevated mortality rates over the baseline. Interestingly,according to future mortality risk, which is an important severity indicator, patients on the left-edge aresignificantly more sick on average than those on the right edge, which is less visible from the enrichment foracute physiology scores.
Figure S3: (a) Prevalence of abnormally low sodium lab value in the next 24 hours, (b-d) Prevalence ofabnormally high potassium/creatinine/HCO3 lab values in the next 24 hours. Each sub-figure illustratesthe enrichment of a distinct phenotype on the SOMVAEprob map. Low sodium and high potassium statesare enriched near the left edge, and near the right edge, respectively, which could represent sub-types ofthe high-risk phenotype found in these regions (compare Fig 4c for the distribution of the acute physiologyscore). Elevated creatinine is a trait that occurs in both these regions. A compact structure associated withelevated HCO3 can be found in the center of the map, which could represent a distinct phenotype with lowermortality risk in our cohort. In all phenotypes, the tendency of SOMVAEprob to recover compact structures isexemplified.
Figure S4: Images generated from the SOM-VAE’s latent space with 512 embeddings trained on MNIST. Ityields an interpretable discrete two-dimensional representation of the data manifold in the higher-dimensionallatent space.
Figure S5: Images generated from the SOM-VAE’s latent space with 512 embeddings trained on Fashion-MNIST. It yields an interpretable discrete two-dimensional representation of the data manifold in the higher-dimensional latent space.
