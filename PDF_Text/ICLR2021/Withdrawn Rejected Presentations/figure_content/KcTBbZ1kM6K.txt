Figure 1: Experiments in Colored MNIST to show test accu-racy is not enough to reflect a model’s OOD accuracy. Thetop left penal shows the test accuracy of ERM and IRM. Theother three panels present the relationship between test ac-curacy (x-axis) and OOD accuracy (y-axis) in three setups.
Figure 2: The index Vγ∣θ is highly correlated tox. The plot contains 501 learnt ERM models withx = 2 × 10-4i, i = 0, 1, ..., 500. The dashed lineis the baseline value when the difference betweendomains is eliminated by pooling and redistribut-ing the training data. The blue solid line is thelinear regression of X versus Vγ∣θ.
Figure 3: The relationship between VY∣θ andOOD accuracy in REx (left) and IRM (right) withλ ∈ {0, 50, 100, 500, 1000}. We train 400 mod-els for each λ. The OOD accuracy and VY∣θ en-joy high Pearson coefficient: -0.9745 (up-left),-0.9761 (down-left), -0.8417 (up-right), -0.9476(down-right). The coefficients are negative be-cause lower VY∣θ forebodes better OOD property.
Figure 4: The standard and shuffle version of the metric, i.e. Vγ∣β and Vγ∣β for ERM, MixuP andgDRO. For each algorithm, each version of the metric, we run the experiments more than 12 timesin case of statistical error. Similar VY∣β and VY∣β represents invariance across Etr, WhICh is the caseof ERM and Mixup. For gDRO, Vγ∣β is clearly smaller.
Figure 5: Experiments in Colored MNIST to show test accuracy (x-axis) cannot be used to judgemodel learnt with different penalty. Consider two test domains with ptest = 0.2 (up penals) andptest = 0.3 (down penals). For each λ, we run IRM and REx 500 times. We can see that when λincreases from λ = 0 to λ = 1000, the OOD accuracy also increases, but test accuracy does not.
Figure 6: Experiments of the relationship between OOD accuracy and CMI (true or estimated usingthe method in Sen et al. (2017)). Models are trained by REx (left) and IRM (right) with λ ∈{0,10,100,1000}. We train 50 models for each λ and calculate the true CMI I(e; y|y) or CCITvalue. As analyzed in the appendix A.5, true CMI enjoys a highly correlated relationship to OODaccuracy, with Pearson Coefficient -0.9923 (left) and -0.9858 (right). However, the estimatedvalue shows a completely different picture, with Pearson Coefficient -0.0768 (left) and -0.1193(right).
Figure 7: The standard and shuffle version of the metric, i.e. Vγ∣β and Vγ∣β for ERM, MixUP andgDRO. ThIS time, all three algorithms show similar Vγ∣β and Vγ∣β∙A.6.2 Full results and comparison with IRM penaltyAs mentioned in Section 5.2, we consider ERM, gDRO, Mixup and IRM on VLCS image dataset.
