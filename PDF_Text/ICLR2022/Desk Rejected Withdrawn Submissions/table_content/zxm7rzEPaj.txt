Table 1: The bias (mean ± std) of ATE estimation on Synthetic data (Syn-mZ -mX -mU)Within-SamPle				Method	Syn-1-4-4	Syn-2-4-4	Syn-2-10-4	Syn-2-4-10DeePIV-LOG	1.0551 ± 0.0105	1.0571 ± 0.0080	1.0920 ± 0.0091	1.0196 ± 0.0076DeePIV-GMM	0.9336 ± 0.0107	0.8744 ± 0.0192	0.7684 ± 0.0232	0.9253 ± 0.0172KernelIV	0.4954 ± 0.0557	0.4573 ± 0.0541	0.7649 ± 0.0283	0.6239 ± 0.0625DualIV	1.4689 ± 0.0721	1.4233 ± 0.0764	1.7189 ± 0.0756	1.5344 ± 0.0727OneSIV	0.8228 ± 0.0752	0.6613 ± 0.0955	0.6886 ± 0.0540	0.8504 ± 0.0727DFIV	0.8515 ± 0.0097	0.8602 ± 0.0071	0.8506 ± 0.0072	0.8858 ± 0.0090DFL	0.8401 ± 0.0020	0.8507 ± 0.0021	0.8380 ± 0.0015	0.8308 ± 0.0045DirectReP	0.1720 ± 0.0173	0.1630 ± 0.0084	0.1181 ± 0.0173	0.1994 ± 0.0160CFR	0.1717 ± 0.0160	0.1582 ± 0.0151	0.1050 ± 0.0196	0.1980 ± 0.0182DRCFR	0.1514 ± 0.0557	0.1359 ± 0.0337	0.0630 ± 0.0439	0.1542 ± 0.0317CB-IV	0.0381 ± 0.0712	0.0160 ± 0.0470	0.0774 ± 0.0413	0.0092 ± 0.0646Out-of-Sample				Method	Syn-1-4-4	Syn-2-4-4	Syn-2-10-4	Syn-2-4-10DeepIV-LOG	1.0549 ± 0.0101	1.0572 ± 0.0081	1.0931 ± 0.0091	1.0197 ± 0.0076DeepIV-GMM	0.9334 ± 0.0106	0.8744 ± 0.0194	0.7682 ± 0.0229	0.9252 ± 0.0173KernelIV	0.4953 ± 0.0552	0.4581 ± 0.0525	0.7652 ± 0.0278	0.6245 ± 0.0627DualIV	1.4722 ± 0.0791	1.4671 ± 0.0764	1.7321 ± 0.0722	1.5131 ± 0.0664
Table 2: The bias (mean ± std) of ATE estimation on real-world data (Data-mZ -mX -mU)				Within-Sample				Method	IHDP-2-6-0	IHDP-2-4-2	Twins-5-8-0	Twins-5-5-3DeepIV-LOG	2.8736 ± 0.0577	2.6227 ± 0.0651	0.0135 ± 0.0215	0.0237 ± 0.0111DeepIV-GMM	3.7760 ± 0.0316	3.7396 ± 0.0402	0.0194 ± 0.0047	0.0221 ± 0.0041KernelIV	3.0605 ± 0.3054	2.9941 ± 0.4634	-	-DualIV	0.5925 ± 0.2212	0.6581 ± 0.2427	-	-OneSIV	1.7249 ± 0.3752	1.7411 ± 0.3422	0.0083 ± 0.0191	0.0080 ± 0.0167DFIV	3.5543 ± 0.0891	3.6218 ± 0.1038	0.0268 ± 0.0005	0.0265 ± 0.0003DFL	3.2018 ± 0.0496	3.1991 ± 0.0374	0.0624 ± 0.0586	0.0847 ± 0.0049DirectRep	0.0675 ± 0.0562	0.4600 ± 0.0711	0.0167 ± 0.0171	0.0193 ± 0.0251CFR	0.0854 ± 0.0579	0.4826 ± 0.0642	0.0115 ± 0.0167	0.0223 ± 0.0176DRCFR	0.0553 ± 0.0644	0.4336 ± 0.0692	0.0114 ± 0.0221	0.0118 ± 0.0174CB-IV	0.0117 ± 0.3882	0.1601 ± 0.2499	0.0067 ± 0.0271	0.0014 ± 0.0249Out-of-Sample				Method	IHDP-2-6-0	IHDP-2-4-2	Twins-5-8-0	Twins-5-5-3DeepIV-LOG	2.8760 ± 0.0553	2.6226 ± 0.0692	0.0140 ± 0.0208	0.0238 ± 0.0111DeepIV-GMM	3.7768 ± 0.0350	3.7388 ± 0.0416	0.0193 ± 0.0047	0.0221 ± 0.0040KernelIV	3.0703 ± 0.3063	3.0232 ± 0.4401	-	-DualIV	0.5642 ± 0.2663	0.7147 ± 0.3547	-	-
Table 3: NetWork StrUctUres of CB-IV on Data-mz-mχ-muStage	Setting	Syn	IHDP	Twins	Loss	log	log	log	Epoch	3	3	3	Batchsize	500	500	500Treatment Regression	MLPLayers	[128,64]	[128,64]	[128,64]	Activation	ReLU	ReLU	ReLU	BatchNorm	True	True	True	Learning.Rate	0.05	0.05	0.05	Optimizer	SGD	SGD	SGD	Loss	MSE	MSE	log	Epoch	3000	100	200	Batchsize	256	100	100	MLPLayers-R	[256] *3	[200]*3	[256]*3Outcome Regression	MLPLayers-Y	[256] *5	[100]*3	[128]*5	Activation	ELU	ELU	ELU	BatchNorm	False	False	False	Learning.Rate	0.0005	0.0005	0.0005	Optimizer	Adam	Adam	Adam	α	0.01/0.001	0.1	0.001/0.0001
Table 4: The bias (mean ± std) of average treatment effect estimation on Synthetic data (Syn(varsused in stage 1)(vars used in stage 2))Within-SamPle				Method	Syn(Z)(X)	Syn(X)(X)	Syn(Z,X)(Z,X)	Syn(Z,X)(X)DeePIV-LOG	1.0551 ± 0.0057	1.0545 ± 0.0072	1.0588 ± 0.0093	1.0571 ± 0.0080DeePIV-GMM	0.8617 ± 0.0164	0.9915 ± 0.0066	0.9607 ± 0.0059	0.8744 ± 0.0192KernelIV	0.9639 ± 0.0698	0.8654 ± 0.1742	0.8897 ± 0.1573	0.4573 ± 0.0541DualIV	0.6582 ± 0.5607	1.6109 ± 0.4953	1.7628 ± 0.0423	1.4233 ± 0.0764OneSIV	1.0477 ± 0.0304	1.1760 ± 0.0457	1.0529 ± 0.0448	0.6613 ± 0.0955DFIV	1.0028 ± 0.0096	0.8945 ± 0.0037	0.8377 ± 0.0066	0.8602 ± 0.0071DFL	0.8422 ± 0.0016	0.8428 ± 0.0019	0.8423 ± 0.0017	0.8507 ± 0.0021DirectReP	0.1630 ± 0.0084	0.1630 ± 0.0084	0.1783 ± 0.0224	0.1630 ± 0.0084CFR	0.1582 ± 0.0151	0.1582 ± 0.0151	0.1775 ± 0.0234	0.1582 ± 0.0151DRCFR	0.1359 ± 0.0337	0.1359 ± 0.0337	0.1414 ± 0.0536	0.1359 ± 0.0337CB-IV	0.4953 ± 0.2631	0.5294 ± 0.0996	0.1145 ± 0.0717	0.0160 ± 0.0470Out-of-Sample				Method	Syn(Z)(X)	Syn(X)(X)	Syn(Z,X)(Z,X)	Syn(Z,X)(X)DeepIV-LOG	1.0552 ± 0.0054	1.0546 ± 0.0075	1.0591 ± 0.0097	1.0572 ± 0.0081DeepIV-GMM	0.8618 ± 0.0164	0.9915 ± 0.0066	0.9606 ± 0.0059	0.8744 ± 0.0194KernelIV	0.9634 ± 0.0699	0.8651 ± 0.1767	0.9164 ± 0.1573	0.4581 ± 0.0525
Table 5: The MSE (mean ± std) of latent outcome estimation on Demand dataWithin-SamPle				Method	500	1000		5000	10000DeePIV-LOG	-	-	-	-DeePIV-GMM	7197.0858 ± 591.5079	11199.8894 ± 6482.5072	3163.3388 ± 266.4328	1356.3735 ± 343.5231KernelIV	3078.2122 ± 647.2202	2363.3228 ± 270.7994	1692.1801 ± 72.6865	1526.4373 ± 141.7145DualIV	13462.7471 ± 4882.1326	12839.8616 ± 5159.1546	28532.6462 ± 15774.3332	>30000OneSIV	6196.9547 ± 1931.3269	6879.3032 ± 1940.6865	8784.7186 ± 1200.5437	8203.8744 ± 1120.1937DFIV	240.0821 ± 381.7838	152.4014 ± 52.8385	198.9294 ± 30.6243	195.2834 ± 9.3424DFL	141.4824 ± 26.4270	-173.2734 ± 29.9088	196.8437 ± 17.8268	195.9884 ± 11.1385DirectReP	138.7284 ± 24.0162	153.4422 ± 16.6723	193.0451 ± 12.8752	191.2359 ± 5.5144CFR	126.9027 ± 20.9857	161.7175 ± 20.9926	191.6562 ± 10.2437	193.3015 ± 5.5614DRCFR	705.7547 ± 462.9351	503.0686 ± 240.5934	419.0754 ± 126.1294	427.2194 ± 162.0811CB-IV	117.6441 ± 23.2538	142.0652 ± 16.1174	164.6670 ± 7.4433	165.0155 ± 5.9588Out-of-Sample				Method	500	1000		5000	10000DeepIV-LOG	-	-	-	-DeepIV-GMM	7249.5025 ± 465.7548	11470.8863 ± 6643.9238	3360.7893 ± 483.8971	1006.6206 ± 313.7140KernelIV	2859.5013 ± 660.9105	2280.9724 ± 547.9235	1142.8346 ± 170.3749	994.9508 ± 146.2092DualIV	12101.9675 ± 3948.9629	12455.8961 ± 2916.7411	27940.9859 ± 14022.5994	>30000
Table 6: The MSE (mean ± std) of latent outcome estimation on different Demand datasets(Demand-γ-λ)Within-Sample			Method	Demand-0-1	Demand-0-5	Demand-5-1DeepIV-LOG	-	-	-DeepIV-GMM	1356.3735 ± 343.5231	3102.8901 ± 744.4496	1465.5604 ± 253.3932KernelIV	1526.4373 ± 141.7145	5772.8724 ± 413.1272	1428.5166 ± 227.3451DualIV	>30000	>30000	>30000OneSIV	8203.8744 ± 1120.1937	30854.0811 ± 3647.2961	7892.6823 ± 2009.5216DFIV	195.2834 ± 9.3424	1205.0481 ± 1740.5136	197.2478 ± 16.8028DFL	195.9884 ± 11.1385	1159.9531 ± 1902.0860	200.3554 ± 8.9157DirectRep	191.2359 ± 5.5144	888.6762 ± 1077.6299	440.0853 ± 117.3984CFR	193.3015 ± 5.5614	465.3831 ± 181.4856	449.6735 ± 161.0288DRCFR	427.2194 ± 162.0811	391.6148 ± 28.2101	405.8180 ± 105.9513CB-IV	165.0155 ± 5.9588	234.1836 ± 30.0674	167.7809 ± 6.7831Out-of-Sample			Method	Demand-0-1	Demand-0-5	Demand-5-1DeepIV-LOG	-	-	-DeepIV-GMM	1006.6206 ± 313.7140	2829.4425 ± 724.6786	1151.6218 ± 284.1778KernelIV	994.9508 ± 146.2092	5435.9011 ± 435.2851	1004.7321 ± 216.7744
