Figure 1: Illustration of Proposed MethodIn this section we describe our method, FeedForward Counterfactual (FFC), for generatingexplanation for time series models. A featureis considered important if it affects the modeloutput the most. In time series, the dynamics ofthe features also change over time, which mayimpact model outcome. As such it is criticalto also identify the precise time points of suchchanges.
Figure 2: Components describing the proposed method.
Figure 3: Two samples showing performance on simulated data. Top row are the original sampledsignals (one per subfigure). FFC and AFO assign importance at the time of spike. Additional samplesare in Appendix A.1.
Figure 4: Simulated Data II: The top plot shows the time series signals and the output risk of theblack-box model. States are shaded in green and yellow. Plots below show the reported importanceof all features over time for baseline methods. Shaded regions in these plots represent the top 5important observations reported by each method.
Figure 5: The top row shows the output risk of the prediction model (black dashed line), andnormalized time series signals. Shaded regions in the top row represent specific clinical interventions.
Figure 6: Top four features assigned to be important for each intervention across compared methods.
Figure 7: Two samples showing performance on simulated data I. Top row are the original sampledsignals (one per subfigure).
Figure 9: Additional patient trajectories and feature importance assignment with all baseline methodsAccordance testing: For this test we look into how much different baselines agree on importantfeature assignment. As we observed from the experiments, counterfactual methods mostly agree onthe most important features for individual samples. We define accordance score between 2 methodsas the percentage of top n signals both identified as important. A score of 80 means on average overthe test data, 80 of the assignments were similar. This is depicted in Figure 10.
Figure 10: Heat map showing the accordance score between pairs of methods for the most important6 signals out of 31 clinical featuresA.4 Run-time analysisIn this section we compare the run-time across multiple baselines. Table 9 shows inference runtimefor all the baseline methods on a machine with Quadro 400 GPU and Intel(R) Xeon(R) CPU E5-1620v4 @ 3.50GHz CPU. The runtime for the counterfactual approaches (FFC, FO and AFO) dependsonly on the length of the time series. It is also the case for FFC since the conditional generator modelsthe joint distribution of all features. This is an advantage, over approaches like LIME, the runtimedepends both on the length of the signal as well as the number of features.
Figure 11: Left: Generator Loss for ghg data. Right: (Scaled) Regresser MSE lossis scaled time series is scaled in the range [-1, 1]. The regressor is an RNN model with theparameter settings given in Table 11. Figure 11 (a) shows the generator loss for all trained conditionalSetting	valueepochs	200Model	RNNbatch size	100Encoding size (m)	100Loss	MSERegressor Activation	LinearGradient Algorithm	Adam (learning rate = 0.001, βι = 0.9, β2 = 0.999, weight decay = 0)Table 11: Training Settings for Regressor for GHG Data(counterfactual) generators, while Figure 11 shows the training loss of black-box that was used topresent feature important results in Section 4.4.
