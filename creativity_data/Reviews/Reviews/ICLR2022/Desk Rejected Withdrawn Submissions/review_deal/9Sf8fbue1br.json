{
    "Decision": "",
    "Reviews": [
        {
            "summary_of_the_paper": "Mini-batch OT solve several small transportation problems between subsets of the distributions support instead of working directly on the whole distributions supports which may become infeasible memory-wise.\nCombining the various \"mini\"-transportation maps is known to have deficiencies. These have been partially tackled with solution based on unbalanced OT. The authors propose a similar solution that replace the unbalanced OT approach with a partial transportation based technique.",
            "main_review": "The paper is very well written and with lots of explanations and experiments. On the negative side, the significance of replacing an unbalanced OT based technique with a partial OT based technique is however less clear.",
            "summary_of_the_review": "The paper is very well written and with lots of convincing explanations and experiments and address an important problem.",
            "correctness": "4: All of the claims and statements are well-supported and correct.",
            "technical_novelty_and_significance": "2: The contributions are only marginally significant or novel.",
            "empirical_novelty_and_significance": "3: The contributions are significant and somewhat new. Aspects of the contributions exist in prior work.",
            "flag_for_ethics_review": [
                "NO."
            ],
            "details_of_ethics_concerns": "None",
            "recommendation": "6: marginally above the acceptance threshold",
            "confidence": "2: You are willing to defend your assessment, but it is quite likely that you did not understand the central parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
        },
        {
            "summary_of_the_paper": "This paper proposes to improve minibatch optimal transport using the framework of partial optimal transport (Chapel\\& al, 2020). \n",
            "main_review": "Overall I think the article is quite well written. The introduction puts the different problems in context and the idea of using partial transport seems to be interesting. The fact that minibatch transport based on unbalanced optimal transport ($m-UOT$) requires to find a good regularization hyperparameter is indeed a limitation. To do without this limitation seems reasonable. The background around the optimal transport and the different variants of the minibatch is well written. \n\nThe novelty is quite limited: the authors apply the framework of (Chapel et al, 2020) directly into the framework of minibatch. This is not a problem for me if the different applications and arguments show that partial transport has a real advantage compared to unbalanced transport. However, on this point, I find that the article does not manage to show sufficiently that partial transport actually brings an improvement compared to unbalanced transport. Moreover, some points lack rigor and are not really clear. See detailed comments below:\n\n- Use of entropic regularization ?\n\nIn many places the authors seem to use an entropy regularized transport without really saying it clearly. For example in the \"Background\" section it says \"The computational cost of both OT and UOT problems are of order $O(n^2/\\varepsilon^2)$ and $O(n^2/\\varepsilon)$, respectively. Its solutions are obtained by running the Sinkhorn algorithm...\" which implies that the classical optimal transport is solved in the general case by a sinkhorn algorithm, which is misleading. \n\nMore importantly, the method proposed by the authors is based directly on (Chapel et al, 2020). However, the authors write: \"The computational complexity of approximating each OT problem in equation (8) is at the order of $O((m+1)^{2}/\\varepsilon)$ where $\\varepsilon >0$ is the tolerance\". \n\nThis sentence implies that an entropy regularization is used for each sub-problem. This poses several problems:\n\n - 1) At no time in the article is entropic regularization defined. I find this rather misleading because one has the impression that the theoretical complexity to solve the partial problem is quadratic in number of samples, whereas, as formulated in (8), it remains cubic without entropic regularization. Moreover in the experiments the entropic term $\\varepsilon$ is not mentioned anywhere which seems to suggest that it is not used in practice.\n\n- 2) The original paper of (Chapel \\& al, 2020) does not use entropy regularization to solve the partial transport but a Frank-Wolfe type algorithm. In this way it is not really clear how the partial OT problems are solved in practice. It is also not clear that the theoretical complexity for solving the problem remains in $O((m+1)^{2}/\\varepsilon)$ in the partial transport setting because the papers (Altschuler et al., 2017; Lin et al., 2019) do not consider this setting. \n\nI think this is an important point that should be clarified, as it is very confusing/misleading in this form.\n\n- About the experiments:\n\nI find that the experiments are not convincing enough and do not show that the partial transport brings a real improvement over the unbalanced transport. The results in Table 1 and 3 are presented without any variance and the improvements over $m-UOT$ seem negligible (in the order of a hundredth). In any case it is really difficult to conclude that the results are statistically different without variance. \n\nMoreover it is not shown how tuning the $s$-parameter of the partial transport is easier than tuning the unbalanced one, which was one of the main problems the authors wanted to solve (paragraph \"Contributions\"). On this point, the justification in the paragraph \"Practical consideration for m-POT\" is rather vague. The main argument is that the $\\tau$ parameter of the unbalanced transport is in $\\mathbb{R}^{+}$ and therefore more difficult to tune than the $s$ parameter of the partial transport which is in $]0,1]$. I find this argument a little borderline because $\\mathbb{R}^{+}$ and $]0,1]$ are the same size (there is a bijection between these two sets). Moreover the paragraph \"Discussion on the fraction of masses $s$\" seems to suggest that finding $s$ is not so easy.\n\n\n- About Theorem 1: \n\nAfter looking at the proofs carefully I think that the proof of the main theoretical result needs a more rigorous rewrite. This result shows that when the size of the minibatch is close to the size of the data then the partial minibatch transport is close to the true partial transport. The proof is in section B.1 of the appendix. I find that it does not detail enough the different arguments and a lot of things are hidden. For example it is not really clear to me how the term in $(\\frac{n}{m})$ appears since the arguments are not detailed. \n\nMoreover the sentence \"$\\|C\\|_{\\infty} < \\infty$ with high probability, these bounds indicate that we can find universal constant $C$ such that $POTs \\leq C$ with high probability\" lacks rigor. If the cost $C$ is a random variable then what is its law? What is its concentration? I don't say that the result is wrong, I just think that the authors should take more time to write with rigor the Hoeffdings inequality with the appropriate concentrations and also to detail the different arguments .\n\nThe same goes for \"Bound for $T_1$\". I don't find that a \"Direct calculation shows that\". Moreover the variables $Z_1, Z_2, \\cdots, Z_k$ are not defined so it is not clear in what way it is \"a direct application of Hoeffding's inequality\". Finally it is not clear that the constant $C$ is the same for $T_1$ and for $T_2$.\n\n - Some sentences are quite clumsy:\n\n - \"However, due to the projection step, sliced optimal transport is not able to keep all the main differences between high dimensional measures\": it is too vague in my opinion since \"main differences\" is not well defined. \n - \"Hence, in applications such as deep generative models where the supports of measures change significantly, we should not fix the regularized parameter of $m-UOT$\"",
            "summary_of_the_review": "In conclusion, I think the article proposes an interesting idea. However many points are too vague and the experiments do not show enough how the proposed approach brings a significant improvement compared to unbalanced minibatch. Considering that the novelty is quite limited I do not think this article is ready yet for publication.\n",
            "correctness": "2: Several of the paper’s claims are incorrect or not well-supported.",
            "technical_novelty_and_significance": "2: The contributions are only marginally significant or novel.",
            "empirical_novelty_and_significance": "2: The contributions are only marginally significant or novel.",
            "flag_for_ethics_review": [
                "NO."
            ],
            "recommendation": "3: reject, not good enough",
            "confidence": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
        },
        {
            "summary_of_the_paper": "The paper proposes a mini-batch formulation of optimal transport. It is based on partial optimal transport and is called m-POT. The formulation has comparable complexity to previous mini-batch formulations, e.g., original Minibatch-OT (m-OT). At the same time, it softens the issue of previous minibatch formulations such as misspecified mappings for m-OT or barely interpretable plans for unbalanced OT (u-OT). Some experiments to support the claims are provided.\n",
            "main_review": "Pros.\n+ Theoretical results on concentration are provided.\nVarious experiments are conducted.\n\nCons.\n- While the idea of m-POT is new, it is an obvious and incremental extension of the prior works (m-OT, m-UOT);\n- Not clear in notation, vague exposition in some places;\n- Irrelevant experiments, not actually demonstrating that the “misspecified plans” issue is resolved;\n- The baselines are mainly limited to the models from the same class (minibatch OT);\n- Some missing baselines based on Minibatch-OT;\n- Provided concentration result (Theorem) is about concentrating around the minibatch-POT plan rather than the full POT plan (or just full OT).\n\nI provide my extended evaluation below.\n\nThe key claim of the paper is that m-OT suffers from misspecified maps,  i.e. provides wrong maps compared to the optimal transportation plan between the original measures. But does m-POT really soften this issue and provide improved performance?\n\nThe theoretical concentration result (Theorem 1) does not support the latter statement. If I correctly understand, the concentration result shows how close the randomly estimated m-POT to the true m-POT. What is truly interesting here and relevant to the misspecification issue, is how m-POT is related to the true (full) POT in terms of m,n. Could the authors provide such a result?\n\nExperiments also do not provide support for the main claim. Domain adaptation is a nice task, but how is it related to the misspecification issue? Domain adaptation might work well even if the adaptation is performed not by optimal transport. Therefore, increased accuracy of estimation of OT plan does not necessarily provide better domain adaptation. Besides, the scores for m-POT almost match or very slightly improve other OT-based methods. I am not sure whether this improvement is significant.\n\nIn generative modeling experiments, the only baselines which are considered are other minibatch methods. Visually the generated images are not very good (images from the appendix), and the FID scores are much bigger compared to those of OT-based generative models which use dual stochastic formulations (WGANs and hundreds of alternatives, see, e.g. WGAN-QC as the reference) as well as other (non-OT-based) GANs. Thus, I do not see any advantage of using m-POT as the loss in GANs since it notably underperforms. Besides, in my view, the experiment with GANs is not very relevant, since it is not clear how it may demonstrate that the issue of misspecified maps is softened. Indeed, the OT plan is used just to compute the loss for the generator. Does it really matter how close this loss to the true OT? There are many GAN losses and it is known that they perform roughly the same, the matter is in the proper hyper-parameters choice, see, e.g., Lucic et al. (2017) “Are GANs created equal? A large scale study”. Does m-UOT loss really provide some improvement?\n\nIn my view, if the authors push that hard that m-UOT does not suffer that much from a misspecification issue, they must provide (1) a relevant experiment demonstrating this (2) properly demonstrating why this is indeed useful in practical tasks.\n\nFinally, there are some other mini-batch-OT papers trying to resolve this issue of misspecification, e.g., Nguyen et. al.  “On Transportation of Mini-batches: A Hierarchical Approach”. Why do the authors not compare to these very related methods?\n\n*Notation.* It is very confusing for the reader that in definition 1 m-OT (as well as m-UOT and m-POT in definitions 2,3) is defined as the average of OT between particular sampled batches. Shouldn’t it be the average of OT between all possible pairs of mini-batches, as, for example,  in definition-1 or m-UOT paper? As far as I understand, what is stated in definitions 1,2,3 is an unbiased estimate of m-OT (POT, UOT) from k random pairs of mini-batches (X^i, T^i) of size m. I think the current form is misleading and the notation/explanations here should be improved (for example, why not introduce \\hat{} for estimates?)",
            "summary_of_the_review": "Unfortunately, I am not convinced that the proposed method is not “yet another OT-based discrepancy” but indeed somewhat useful and can be successfully applied to practical tasks. Taking into account that the proposed idea is very straightforward (one may argue that it lies on the surface) and no significant theoretical support is provided, I vote for rejecting this paper. ",
            "correctness": "2: Several of the paper’s claims are incorrect or not well-supported.",
            "technical_novelty_and_significance": "2: The contributions are only marginally significant or novel.",
            "empirical_novelty_and_significance": "2: The contributions are only marginally significant or novel.",
            "flag_for_ethics_review": [
                "NO."
            ],
            "details_of_ethics_concerns": "-",
            "recommendation": "3: reject, not good enough",
            "confidence": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
        }
    ]
}